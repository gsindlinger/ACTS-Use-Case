\chapter{Quellcode}

\section{HTML}

\begin{lstlisting}[style=html]
<!DOCTYPE html>

<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!--Font Awesome Icons laden (Offline gespeichert)-->
    <link href="css/css/all.min.css" type="text/css" rel="stylesheet" media="screen">

    <!-- CSS-Skripte-->
    <link rel="stylesheet" type="text/css" href="css/root.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/rangeSlider.css">
    <link rel="stylesheet" type="text/css" href="css/onOffSwitch.css">
    <link rel="stylesheet" type="text/css" href="css/mediaQueries.css">

    <!-- PWA Properties -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="white"/>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="images/icons/icon-152x152.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Entnahmerechner">
    <meta name="msapplication-TileImage" content="images/icons/icon-144x144.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">

    <!--Titel-->
    <title>Entnahmerechner</title>

</head>
<body>
    <div id="backgroundImage"></div>
    <header id="header">
        <!--Unterscheidung zwischen normalem NormalHeader und Smartphone/Tablet SpecialHeader
        Im 2. Fall werden die Input-Felder mittels Javascript an den Header angehängt
        -->
        <div id="headerNormal">
            <div id="title">
                    <h1>Berechnen Sie den Entnahmeplan Ihrer Altersvorsorge</h1>
                    <div id="subtitle">
                        <p>Wie lange reichen Ihre angesparten Mittel?</p>
                    </div>
            </div>
            <div id="logo">
                <img id="imgLogo" src="Uni_ulm_logo.svg" alt="Logo der Universität Ulm">
            </div>
        </div>
        <div id="headerSpecial">
            <div class="smartphoneHeaderContainer">
                <div class="smartphoneHeaderBox" onclick="openSliderPopup(0)">
                    <div class="smartphoneIcons">
                        <!--Alle i-Elemente mit Klasse fas repräsentieren Font Awesome Icons-->
                        <i class="fas fa-step-backward"></i>
                    </div>
                    <div class="smartphoneHeaderText"><p>Beginn der Entnahme</p></div>
                </div>
                <div id="popupStartEntnahme" class="popupSmartphone">
                    <div class="triangle"></div>
                    <div class="popupHeaderSpecial move10Left">
                        <div class="headerPopup">
                            <div class="prevNextDiv">
                                <a class="previousButton buttons" onclick="changeInputOnButtonClick(1, 3)">&laquo; Zurück</a>
                                <a class="nextButton buttons" onclick="changeInputOnButtonClick(0, 1)">Weiter &raquo;</a>
                            </div>
                            <div class="prevNextDiv">
                                <a class="closeButtonRight buttons" style="padding-right: 1rem;" onclick="closeSliderPopup(0)">Schließen<i class="fas fa-times clickIcon" style="text-shadow: 0rem;"></i></a>
                            </div>
                        </div>
                        <div class="textPopupSpecial"><p>Wählen Sie das <b>Alter</b>, ab welchem Sie von Ihren angesparten Mitteln <b>monatlich Geld entnehmen</b> wollen!</p></div>
                    </div>
                </div>
            </div>
            <div class="smartphoneHeaderContainer">
                <div class="smartphoneHeaderBox" onclick="openSliderPopup(1)">
                    <div class="smartphoneIcons">
                        <i class="fas fa-step-forward"></i>
                    </div>
                    <div class="smartphoneHeaderText"><p>Ende der Entnahme</p></div>
                </div>
                <div id="popupEndeEntnahme" class="popupSmartphone">
                    <div class="triangle"></div>
                    <div class="popupHeaderSpecial move30Left">
                        <div class="headerPopup">
                            <div class="prevNextDiv">
                                <a class="previousButton buttons" onclick="changeInputOnButtonClick(1, 0)">&laquo; Zurück</a>
                                <a class="nextButton buttons" onclick="changeInputOnButtonClick(1, 2)">Weiter &raquo;</a>
                            </div>
                            <a class="closeButtonRight buttons" style="padding-right: 1rem;" onclick="closeSliderPopup(1)">Schließen<i class="fas fa-times clickIcon" style="text-shadow: 0rem;"></i></a>
                        </div>
                        <div class="textPopupSpecial"><p>Wählen Sie das <b>Alter</b>, bis zu welchem Sie glauben die <b>monatliche Entnahme wahrzunehmen</b> (beispielsweise erwartetes <b>Todesalter</b>)!</p></div>
                    </div>
                </div>
            </div>
            <div class="smartphoneHeaderContainer">
                <div class="smartphoneHeaderBox" onclick="openSliderPopup(2)">
                    <div class="smartphoneIcons">
                        <i class="fas fa-money-check-alt"></i>
                    </div>
                    <div class="smartphoneHeaderText"><p>Startkapital</p></div>
                </div>
                <div id="popupStartkapital" class="popupSmartphone">
                    <div class="triangle"></div>
                    <div class="popupHeaderSpecial move150Left">
                        <div class="headerPopup">
                            <div class="prevNextDiv">
                                <a class="previousButton buttons" onclick="changeInputOnButtonClick(2, 1)">&laquo; Zurück</a>
                                <a class="nextButton buttons" onclick="changeInputOnButtonClick(2, 5)">Weiter &raquo;</a>
                            </div>
                            <a class="closeButtonRight buttons" style="padding-right: 1rem;" onclick="closeSliderPopup(2)">Schließen<i class="fas fa-times clickIcon" style="text-shadow: 0rem;"></i></a>
                        </div>
                        <div class="textPopupSpecial"><p>Wählen Sie Ihr <b>angespartes Kapital</b>, welches Sie zu <b>Beginn der Entnahme</b> voraussichtlich zur Verfügung haben!</p></div>
                    </div>
                </div>
            </div>
            <div class="smartphoneHeaderContainer">
                <div class="smartphoneHeaderBox" onclick="openSliderPopup(5)">
                    <div class="smartphoneIcons">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="smartphoneHeaderText"><p>Rendite</p></div>
                </div>
                <div id="popupRendite" class="popupSmartphone">
                    <div class="triangle triangleColorChange"></div>
                    <div class="popupHeaderSpecial move150Right">
                        <div class="headerPopup">
                            <div class="prevNextDiv">
                                <a class="previousButton buttons" onclick="changeInputOnButtonClick(5, 2)">&laquo; Zurück</a>
                                <a class="nextButton buttons" onclick="changeInputOnButtonClick(5, 4)">Weiter &raquo;</a>
                            </div>
                            <a class="closeButtonRight buttons" style="padding-right: 1rem;" onclick="closeSliderPopup(5)">Schließen<i class="fas fa-times clickIcon" style="text-shadow: 0rem;"></i></a>
                        </div>
                        <div class="textPopupSpecial"><p><b>Während des Entnahmeprozesses</b> zwischen dem Zeitpunkt zu Beginn der Entnahme und zum Ende der Entnahme wird der <b>verbleibende Betrag Ihrer angesparter Mittel</b> auf dem Kapitalmarkt <b>investiert</b>. <br><br>
                            Wählen Sie nun eine <b>mögliche Rendite</b>, die Sie auf dem Kapitalmarkt erwarten!</p></div>
                    </div>
                </div>
            </div>
            <div class="smartphoneHeaderContainer">
                <div class="smartphoneHeaderBox" onclick="openSliderPopup(4)">
                    <div class="smartphoneIcons">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="smartphoneHeaderText"><p>Risiko</p></div>
                </div>
                <div id="popupRisiko" class="popupSmartphone">
                    <div class="triangle triangleColorChange"></div>
                    <div class="popupHeaderSpecial move30Right">
                        <div class="headerPopup">
                            <div class="prevNextDiv">
                                <a class="previousButton buttons" onclick="changeInputOnButtonClick(4, 5)">&laquo; Zurück</a>
                                <a class="nextButton buttons" onclick="changeInputOnButtonClick(4, 3)">Weiter &raquo;</a>
                            </div>
                            <a class="closeButtonRight buttons" style="padding-right: 1rem;" onclick="closeSliderPopup(4)">Schließen<i class="fas fa-times clickIcon" style="text-shadow: 0rem;"></i></a>
                        </div>
                        <div class="textPopupSpecial"><p>Die <b>Rendite</b>, welche Ihre angesparten Mittel auf dem Kapitalmarkt erzielt, <b>hängt zwangsläufig davon ab</b>, in welche <b>Wertanlagen</b> die Mittel <b>investiert</b> werden.
                            <br><br>
                            Deswegen wird das <b>Risiko der Anlage</b> standardmäßig abhängig von der <b>gewählten Rendite</b> berechnet.
                        </p></div>
                        <div class="centerContent">
                            <a id="popupDeviationSpecialHeader" class="changeSlide" style="transform: rotate(270deg);" onclick="openPopup()">&#10095;</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="smartphoneHeaderContainer">
                <div class="smartphoneHeaderBox" onclick="openSliderPopup(3)">
                    <div class="smartphoneIcons">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div class="smartphoneHeaderText"><p>Monatliche Entnahme</p></div>
                </div>
                <div id="popupMonatlicheEntnahme" class="popupSmartphone">
                    <div class="triangle triangleColorChange"></div>
                    <div class="popupHeaderSpecial move10Right">
                        <div class="headerPopup">
                            <div class="prevNextDiv">
                                <a class="previousButton buttons" onclick="changeInputOnButtonClick(3, 4)">&laquo; Zurück</a>
                                <a class="nextButton buttons" onclick="changeInputOnButtonClick(3, 0)">Weiter &raquo;</a>
                            </div>
                            <a class="closeButtonRight buttons" style="padding-right: 1rem;" onclick="closeSliderPopup(3)">Schließen<i class="fas fa-times clickIcon" style="text-shadow: 0rem;"></i></a>
                        </div>
                        <div class="textPopupSpecial"><p>
                            Die zuvor gewählten Angaben wurden dazu verwendet, einen <b>Vorschlag für eine monatliche Entnahme</b> zu berechnen. <br>
                            Anhand dieses Wertes wird ermittelt, ob Ihr angespartes Geld bis zum Ende der Entnahme <b>ausreicht</b> oder <b>nicht</b>. Wollen Sie diesen Wert anpassen?
                            <br><br>
                            Weitere <b>Informationen</b> erhalten Sie, wenn Sie auf den <b>Button neben dem Vorschlag für die Entnahme</b> klicken.
                        </p></div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div id="main">
        <div id="container">
            <div id="inputVariables" class="centerContent">
                <div id="Renteneintrittsalter" class="inputBoxen">
                    <div class="titleInputbox">
                        <p>Beginn der Entnahme</p>
                        <i class="fas fa-info-circle" onmouseover="showInfoPopup('Renteneintrittsalter')" onmouseout="hideInfoPopup('Renteneintrittsalter')"></i>
                        <div  id="triangleTop"  class="triangle notVisiblePopup"></div>
                        <div class="infoHeaderNormal startDivAtTop notVisiblePopup">
                            <p>Wählen Sie das <b>Alter</b>, ab welchem Sie von Ihren angesparten Mitteln <b>monatlich Geld entnehmen</b> wollen!</p>
                        </div>
                    </div>
                    <div class="formBox">
                        <div class="sliderText">
                            <p><span id="textRenteneintrittsalter">90</span> Jahre</p>
                            <div class="redo" onmouseover="showStandardwertUebernehmenPopup('standardRenteneintrittsalter')"
                            onmouseout="hideStandardwertUebernehmenPopup('standardRenteneintrittsalter')" onclick="vorschlagUebernehmen(0)">
                                <i class="fas fa-retweet"></i>
                                <div class="redoSmartphone">Wert<br>zurücksetzen?</div>

                            </div>
                            <div id="standardRenteneintrittsalter" class="popupStandardwertUebernehmen notVisiblePopup">
                                <div class="triangle"></div>
                                <div class="popupStandardwertUebernehmenInner">Wert zurücksetzen?</div>
                            </div>
                        </div>
                        <div class="sliderContainer">
                            <a class="inputSlide inputPrev" onclick="changeRangeValue('rangeRenteneintrittsalter',-1)">&#10094;</a>
                            <input type="range" min="50" max="99" value="67"
                                id="rangeRenteneintrittsalter" class=" slider PointerEvents">
                            <a class="inputSlide inputNext" onclick="changeRangeValue('rangeRenteneintrittsalter',1)">&#10095;</a>
                        </div>
                    </div>
                </div>

                <div id="Rentenaustrittsalter" class="inputBoxen">
                    <div class="titleInputbox">
                        <p>Ende der Entnahme</p>
                        <i class="fas fa-info-circle" onmouseover="showInfoPopup('Rentenaustrittsalter')" onmouseout="hideInfoPopup('Rentenaustrittsalter')"></i>
                        <div class="triangle notVisiblePopup"></div>
                        <div class="infoHeaderNormal startDivNormal notVisiblePopup">
                            <p>Wählen Sie das <b>Alter</b>, bis zu welchem Sie glauben die <b>monatliche Entnahme wahrzunehmen</b> (beispielsweise erwartetes <b>Todesalter</b>)!</p>
                        </div>
                    </div>
                    <div class="formBox">
                        <div class="sliderText">
                            <p><span id="textRentenaustrittsalter">90</span> Jahre</p>
                            <div class="redo" onmouseover="showStandardwertUebernehmenPopup('standardRentenaustrittsalter')"
                            onmouseout="hideStandardwertUebernehmenPopup('standardRentenaustrittsalter')" onclick="vorschlagUebernehmen(1)">
                                <i class="fas fa-retweet"></i>
                                <div class="redoSmartphone">Wert<br>zurücksetzen?</div>
                            </div>
                            <div id="standardRentenaustrittsalter" class="popupStandardwertUebernehmen notVisiblePopup">
                                <div class="triangle"></div>
                                <div class="popupStandardwertUebernehmenInner">Wert zurücksetzen?</div>
                            </div>
                        </div>
                        <div class="sliderContainer">
                            <a class="inputSlide inputPrev" onclick="changeRangeValue('rangeRentenaustrittsalter',-1)">&#10094;</a>
                            <input type="range" min="60" max="120" value="90"
                                id="rangeRentenaustrittsalter" class=" slider PointerEvents">
                            <a class="inputSlide inputNext" onclick="changeRangeValue('rangeRentenaustrittsalter',1)">&#10095;</a>

                        </div>
                    </div>
                </div>

                <div id="Einmalbetrag" class="inputBoxen">
                    <div class="titleInputbox">
                        <p>Startkapital</p>
                        <i class="fas fa-info-circle" onmouseover="showInfoPopup('Einmalbetrag')" onmouseout="hideInfoPopup('Einmalbetrag')"></i>
                        <div class="triangle notVisiblePopup"></div>
                        <div class="infoHeaderNormal startDivNormal notVisiblePopup">
                            <p>Wählen Sie Ihr <b>angespartes Kapital</b>, welches Sie zu <b>Beginn der Entnahme</b> voraussichtlich zur Verfügung haben!</p>
                        </div>
                    </div>
                    <div class="formBox">
                        <div class="sliderText">
                            <p><span id="textEinmalbetrag">100000</span></p>
                            <div class="redo" onmouseover="showStandardwertUebernehmenPopup('standardEinmalbetrag')"
                            onmouseout="hideStandardwertUebernehmenPopup('standardEinmalbetrag')" onclick="vorschlagUebernehmen(2)">
                                <i class="fas fa-retweet"></i>
                                <div class="redoSmartphone">Wert<br>zurücksetzen?</div>
                            </div>
                            <div id="standardEinmalbetrag" class="popupStandardwertUebernehmen notVisiblePopup">
                                <div class="triangle"></div>
                                <div class="popupStandardwertUebernehmenInner">Wert zurücksetzen?</div>
                            </div>
                        </div>
                        <div class="sliderContainer">
                            <a class="inputSlide inputPrev" onclick="changeRangeValue('rangeEinmalbetrag',-1)">&#10094;</a>
                            <input type="range" min="5000" max="1000000" value="100000" step="5000" class="slider PointerEvents"
                                id="rangeEinmalbetrag">
                            <a class="inputSlide inputNext" onclick="changeRangeValue('rangeEinmalbetrag',1)">&#10095;</a>
                        </div>
                    </div>
                </div>

                <div id="Renditeerwartung" class="inputBoxen">
                    <div class="titleInputbox">
                        <p>Rendite</p>
                        <i class="fas fa-info-circle" onmouseover="showInfoPopup('Renditeerwartung')" onmouseout="hideInfoPopup('Renditeerwartung')"></i>
                        <div class="triangle notVisiblePopup"></div>
                        <div class="infoHeaderNormal startDivNormal notVisiblePopup">
                            <p><b>Während des Entnahmeprozesses</b> zwischen dem Zeitpunkt zu Beginn der Entnahme und zum Ende der Entnahme wird der <b>verbleibende Betrag Ihrer angesparter Mittel</b> auf dem Kapitalmarkt <b>investiert</b>. <br><br>
                                Wählen Sie nun eine <b>mögliche Rendite</b>, die Sie auf dem Kapitalmarkt erwarten!</p>
                        </div>
                    </div>
                    <div class="formBox">
                    <div class="sliderText">
                        <p><span id="textRenditeerwartung">4 %</span></p>
                        <div class="redo" onmouseover="showStandardwertUebernehmenPopup('standardRendite')"
                        onmouseout="hideStandardwertUebernehmenPopup('standardRendite')" onclick="vorschlagUebernehmen(5)">
                            <i class="fas fa-retweet"></i>
                            <div class="redoSmartphone">Wert<br>zurücksetzen?</div>
                        </div>
                        <div id="standardRendite" class="popupStandardwertUebernehmen notVisiblePopup">
                            <div class="triangle"></div>
                            <div class="popupStandardwertUebernehmenInner">Wert zurücksetzen?</div>
                        </div>
                    </div>
                        <div class="sliderContainer">
                            <a class="inputSlide inputPrev" onclick="changeRangeValue('rangeRenditeerwartung',-1)">&#10094;</a>
                            <input type="range" min="0" max="10" value="4" class="slider PointerEvents"
                                id="rangeRenditeerwartung">
                            <a class="inputSlide inputNext" onclick="changeRangeValue('rangeRenditeerwartung',1)">&#10095;</a>
                        </div>
                    </div>
                </div>
                <div id="Standardabweichung" class="inputBoxen">
                        <div class="titleInputbox">
                            <p>Risiko</p>
                            <i class="fas fa-info-circle" onmouseover="showInfoPopup('Standardabweichung')" onmouseout="hideInfoPopup('Standardabweichung')"></i>
                            <div class="triangle notVisiblePopup"></div>
                            <div class="infoHeaderNormal startDivMediumUp notVisiblePopup">
                                <p>Die <b>Rendite</b>, welche Ihre angesparten Mittel auf dem Kapitalmarkt erzielt, <b>hängt zwangsläufig davon ab</b>, in welche <b>Wertanlagen</b> die Mittel <b>investiert</b> werden.
                                    <br><br>
                                    Deswegen wird das <b>Risiko der Anlage</b> standardmäßig abhängig von der <b>gewählten Rendite</b> berechnet. <br>
                                    Wenn Sie das Risiko <b>selbstständig</b> wählen wollen, öffnen Sie das zusätzliche Fenster durch Klicken auf den Pfeil.
                                </p>
                            </div>
                        </div>
                        <div class="centerContent flexRow" style="height: 80%;">
                            <div class="centerContent flexColumn alignCenter">
                                <div class="sliderText" style="margin-left: 1rem">
                                    <p><span id="textStandardabweichung" class="opacityLow">Kein Risiko</span></p>
                                </div>
                                <div id="wholeInputDeviation" class="sliderContainer sliderPopup opacityLow" onclick="openDeviationPopup()">
                                    <a class="inputSlide inputPrev buttonStandardabweichung buttonDeviation" onclick="changeRangeValueDeviation('rangeStandardabweichung',-1)">&#10094;</a>
                                    <input type="range" min="0" max="4" value="0" class="slider noPointerEvents" disabled="true"
                                        id="rangeStandardabweichung">
                                    <a class="inputSlide inputNext buttonStandardabweichung buttonDeviation" onclick="changeRangeValueDeviation('rangeStandardabweichung',1)">&#10095;</a>
                                </div>
                            </div>
                            <div class="centerContent alignCenter" style="width: 1.5rem">
                                <a class="changeSlide" onclick="openPopup()" style="font-size: 2.5rem; margin-right: 0.5rem;;">&#10095;</a>
                            </div>
                        </div>



                        <div id="popupDeviation" class="popup boxShadowSmall">
                            <div class="headerPopup">
                                <a class="closeButtonRight popupsA" onclick="closePopup(0)">
                                    <span>Schließen</span><i class="fas fa-times" style="text-shadow: 0rem;"></i>
                                </a>
                            </div>
                            <div id="mainPopupDeviation" class="mainPopup">
                                <p>Das <b>Risiko der Anlage</b> hängt von der gewählten Rendite ab.</p>
                                <p>Möchten Sie das Risiko selbständig auswählen?</p>

                                <!-- made with https://proto.io/freebies/onoff/ -->
                                <div class="centerContent" style="padding-top: 1rem;">
                                    <div class="onoffswitch" onclick="activateSigma()" onload="defaultCheckbox()">
                                        <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="checkboxMuSigma">
                                        <label class="onoffswitch-label" for="checkboxMuSigma">
                                            <span class="onoffswitch-inner"></span>
                                            <span class="onoffswitch-switch"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                </div>
                <div id="Rente" class="inputBoxen">
                    <div class="titleInputbox">
                        <p>Monatliche Entnahme</p>
                        <i class="fas fa-info-circle" onmouseover="showInfoPopup('Rente')" onmouseout="hideInfoPopup('Rente')"></i>
                        <div class="triangle notVisiblePopup"></div>
                        <div class="infoHeaderNormal startDivAtBottom notVisiblePopup"><p>
                            Die zuvor gewählten Angaben wurden dazu verwendet, einen <b>Vorschlag für eine monatliche Entnahme</b> zu berechnen. <br>
                            Anhand dieses Wertes wird ermittelt, ob Ihr angespartes Geld bis zum Ende der Entnahme <b>ausreicht</b> oder <b>nicht</b>.
                            <br><br> Wollen Sie diesen Wert anpassen?
                            <br><br>
                            Weitere <b>Informationen</b> erhalten Sie, wenn Sie auf den <b>Button neben dem Vorschlag für die Entnahme</b> klicken.
                        </p>
                        </div>
                    </div>
                    <div class="formBox">
                        <div class="sliderText">
                            <p><span id="textRente">5000</span></p>
                            <div class="redo" onmouseover="showStandardwertUebernehmenPopup('standardRente')"
                            onmouseout="hideStandardwertUebernehmenPopup('standardRente')" onclick="vorschlagUebernehmen(3)">
                                <i class="fas fa-retweet"></i>
                                <div class="redoSmartphone">Vorschlag<br>übernehmen?</div>
                            </div>
                            <div id="standardRente" class="popupStandardwertUebernehmen notVisiblePopup">
                                <div class="triangle"></div>
                                <div class="popupStandardwertUebernehmenInner">Vorschlag übernehmen?</div>
                            </div>
                        </div>
                        <div class="sliderContainer">
                            <a class="inputSlide inputPrev" onclick="changeRangeValue('rangeRente',-1)">&#10094;</a>
                            <input type="range" min="1000" max="1000000" value="5000" step="5000" class="slider PointerEvents"
                                id="rangeRente">
                            <a class="inputSlide inputNext" onclick="changeRangeValue('rangeRente',1)">&#10095;</a>
                        </div>
                    </div>
                </div>
            </div>

            <!--Der Inhalt der Visualisierungen beginnt hier
            -->
            <div id="display" class="noShrink">
                <div id="vizHeader">
                    <div class="vizHeaderIconPlusText">
                        <div class="vizHeaderIcon">
                            <img src="svg/rente.svg" alt="Rente Icon">
                        </div>
                        <div id="rente">
                            <div id="calcRenteDiv">
                                <span id="calcRenteMain" class="fontHeader">
                                    <span id="calcRente"></span>
                                    <div class="popupVorschlagUebernehmen" id="popupVorschlagUebernehmenInfo">
                                        <i id="vorschlagIcon" class="fas fa-info-circle" onclick="openProposalPopup()"></i>
                                    </div>
                                    <div id="popupVorschlag">
                                        <div class="trianglePopupA"></div>
                                        <div id="popupVorschlagBody" class="popupWithoutDisplay">
                                            <div class="headerPopup">
                                                <a class="closeButtonRight popupsA" onclick="closeProposalPopup()">
                                                    <span>Schließen</span><i class="fas fa-times" style="text-shadow: 0rem;"></i>
                                                </a>
                                            </div>
                                            <div class="mainPopup"><p>
                                                Die <b>Entwicklung Ihrer Wertanlage</b> während des Entnahmeprozesses ist aufgrund des Risikos <b>nur bedingt vorhersehbar</b>.
                                                <br><br>
                                                Die <b>Schwankungen des Kapitalmarktes</b> sorgen dafür, 
                                                dass die <b>tatsächliche Rendite</b> in jedem Jahr sich von Ihrer <b>ausgewählten Rendite unterscheidet</b>.
                                                <br><br>
                                                Lässt man die Berücksichtigung des Risikos <b>außen vor</b>  und geht davon aus, 
                                                dass in jedem Jahr zwischen dem Beginn der Entnahme und dem Ende der Entnahme <b>exakt Ihre gewählte Rendite erzielt wird</b>, 
                                                dann führt dieser Vorschlag einer monatlichen Entnahme dazu, dass ihre Entnahme <b>exakt bis zum Ende der Entnahme reicht</b>.
                                                <br><br>
                                                Möchten Sie diesen Vorschlag übernehmen?
                                            </p>
                                            </div>
                                            <button id="buttonRedo" onclick="resetProposal()"><span>Vorschlag übernehmen!</span>
                                            </button>
                                        </div>
                                    </div>
                                </span>
                            </div>
                            <p>Vorschlag für eine monatliche Entnahme</p>
                        </div>
                    </div>
                    <div class="vizHeaderIconPlusText">
                            <div class="vizHeaderIcon">
                                <img src="svg/lebenserwartung.svg" alt="Rente Icon">
                            </div>
                            <div id="lebenserwartung">
                                <p style="width: 30rem;"> <span id="prefixPercentageRentenaustrittsalter">ca.</span> <span id="percentageRentenaustrittsalter" class="fontHeader">50%</span> aller Deutschen <br>
                                erreichen das Alter von
                                <span id="headerRentenaustrittsalter" class="fontHeader" style="font-size: 1.9rem">90 Jahren</span>
                                </p>
                            </div>
                    </div>
                </div>
				<div id="vizMain" onclick="closeAllPopups()">
					<div id="vizSlide">
						<a class="prev changeSlide" onclick="plusSlides(-1)" style="font-size: 2.5rem;">&#10094;</a>
                        <!-- Hier folgen die drei verschiedenen Seiten, die mittels Javascript ein-/ausgeblendet werden
                        -->


                        <!--Smiley-Darstellung-->
                        <div id="viz1" class="slideshow fade">

							<!-- Titel für die Visualisierungen -->
							<div id="vizTopGood" class="fontVizSmiley" style="margin: auto 0 auto 0;">Geld <b>bleibt übrig</b></div>
							<div id="vizTopMedium" class="fontVizSmiley" style="margin: auto 0 auto 0;">Geld <b>reicht</b> passend</div>
							<div id="vizTopBad" class="fontVizSmiley" style="margin: auto 0 auto 0;">Geld reicht <b>nicht</b></div>

							<!-- Visualisierungen selbst -->
							<div id="good" class="centerContentGrid">
								<img class="centerContent boxShadowBig" src="svg/good.svg" alt="Smiley Good">
							</div>
							<div id="medium" class="centerContentGrid">
								<img class="centerContent boxShadowBig" src="svg/medium.svg" alt="Smiley Medium">
							</div>
							<div id="bad" class="centerContentGrid">
								<img class="centerContent boxShadowBig" src="svg/bad.svg" alt="Smiley Bad">
							</div>

							<!-- Prozentzahlen der Visualisierungen -->
							<div id="textGood" class="fontHeader textSmiley centerContent"></div>
							<div id="textMedium" class="fontHeader textSmiley centerContent"></div>
							<div id="textBad" class="fontHeader textSmiley centerContent"></div>
                        </div>

                        <!--Donut-Chart-Darstellung-->
                        <div id="viz3" class="slideshow fade flexColumn">
                            <div id="viz3Header" class="centerContent alignCenter">
                                    <h2>Reicht das Geld um ein bestimmtes Alter zu erreichen?</h2>
                            </div>
                            <div id="viz3Percentages" class="centerContent flexRow alignCenter"></div>
                            <div id="viz3SelectAgeContainer" class="centerContent">
                                <div id="viz3SelectAge" class="centerContent">
                                    <div id="viz3SelectAgeHeader" class="centerContent alignCenter">
                                        <h2>Wählen Sie ein bestimmtes Alter...</h2>
                                    </div>

                                        <div id="viz3SelectAgeDisplay" class="centerContent flexColumn">
                                        <div id="viz3SelectAgeDonut" class="centerContent flexColumn alignCenter"></div>
                                        <div class="sliderContainer PointerEvents">
                                            <a class="inputSlide inputPrev inputSelectAge" onclick="changeDonutValue(-1)">&#10094;</a>
                                            <input type="range" min="60" max="120" value="90" oninput="changeDonutValue(0)"
                                                id="viz3SelectAgeRange">
                                            <a class="inputSlide inputNext inputSelectAge" onclick="changeDonutValue(1)">&#10095;</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!--Histogram-Darstellung-->
						<div id="viz2" class="slideshow fade flexColumn"></div>

						<a class="next changeSlide" onclick="plusSlides(1)" style="font-size: 2.5rem;">&#10095;</a>
                    </div>

					<div id="vizSlideIcons">
						<div class="vizSlideIconsDetail hoverPage activePage" onclick="currentSlide(1)">
							<i class="fas fa-smile slideIcon"></i>
                        </div>
						<div class="vizSlideIconsDetail hoverPage" onclick="currentSlide(2)">
                            <i class="fas fa-chart-pie slideIcon"></i>
                        </div>
						<div class="vizSlideIconsDetail hoverPage" onclick="currentSlide(3)">
                            <i class="far fa-chart-bar slideIcon"></i>
                        </div>
					</div>
				</div>
            </div>
        </div>
    </div>
</div>

<!--Dieses Div dient dazu, eine vergleichbare Größe zur Berechnung von anderen Größenangaben mittels Javascript zu gewährleisten.
    Problem ist, dass in vielen Bereichen das Ausblenden von Inhalten mittels CSS-Befehl "display: none" durchgeführt wurde und
    demnach keine Größenberechnung möglich ist. Dieses Div soll dementsprechend eine Möglichkeit bieten fehlende Größenwerte zu berechnen

    Es wird mittels Positionierung außerhalb des sichtbaren Bereichs gelegt-->
<div id="viz2Test" class="centerContent alignCenter"><h2>Test</h2></div>

<footer>
    <div id="copyright" onclick="openFooterPopup()">&copy; Copyright 2019 Johannes Gabriel Sindlinger</div>
    <div id="infoFooter">
        <i class="fas fa-info-circle" onclick="openFooterPopup()"></i>
        <div id="infoPopup" class="popupWithoutDisplay boxShadowSmall">
            <div class="headerPopup">
                <a class="closeButtonRight popupsA" onclick="closeFooterPopup()">
                    <span>Schließen</span><i class="fas fa-times" style="text-shadow: 0rem;"></i>
                </a>
            </div>
            <div id="mainInfoPopup" class="mainPopup">
                <h3>Urheberrechtshinweise zu den verwendeten Icons:</h3>
                <div class="copyrightItemOverall">
                    <div class="copyrightItemIcon">
                        <img class="imgFooter" src="svg/medium.svg" alt="Smiley Good">
                        <p>Smileys</p>
                    </div>
                    <div class="copyrightItemDisclaimer aStyling">
                        Made by <a href="https://www.flaticon.com/authors/roundicons" title="Roundicons">Roundicons</a> 
                        von <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
                    </div>
                </div>
                <div class="copyrightItemOverall">
                    <div class="copyrightItemIcon">
                        <img class="imgFooter" src="svg/lebenserwartung.svg" alt="Lebenserwartung">
                        <p>Lebenserwartung</p>
                    </div>
                    <div class="copyrightItemDisclaimer aStyling">
                        Made by <a href="https://www.flaticon.com/authors/freepik" title="freepik">Freepik</a> 
                        von <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
                    </div>
                </div>
                <div class="copyrightItemOverall">
                    <div class="copyrightItemIcon">
                        <img class="imgFooter" src="svg/rente.svg" alt="Vorschlag zur Entnahme">
                        <p>Vorschlag zur Entnahme</p>
                    </div>
                    <div class="copyrightItemDisclaimer aStyling">
                        Made by <a href="https://www.flaticon.com/authors/freepik" title="freepik">Freepik</a> 
                        von <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
                    </div>
                </div>
                <br>
                <p class="aStyling">Alle weiteren Icons wurden mit <a href="https://fontawesome.com/" title="Font Awesome">Font Awesome</a> erstellt.</p>
            </div>
        </div>
    </div>
</footer>


<!--Im Folgenden sind alle Javascript-Skripte aufgeführt-->

<!--D3 zur Visualisierung der Daten (Donut-Chart und Histogramm)-->
<!-- Quelle: https://github.com/d3/d3-->
<script src="js/d3v5Min.js"></script>
<!--Skript zum Seeden der Zufallszahlen: Ermöglicht Reproduzierbarkeit der Ergebnisse-->
<!-- Quelle: https://github.com/davidbau/seedrandom-->
<script src="js/seedRandom.js"></script>
<!--Skript, welches die Touch-Interaktion zum Wechseln der Visualisierungsseiten ermöglicht-->
<!--Quelle:  https://github.com/john-doherty/swiped-events-->
<script src="js/swiped-events.min.js"></script>

<!--Eigene Javascript-Skripte-->
<script src="js/variables.js"></script>
<script src="js/mediaQueries.js"></script>
<script src="js/pageSlider.js"></script>
<script src="js/hilfsprozeduren.js"></script>
<script src="js/renteBerechnen.js"></script>
<script src="js/blackScholesModel.js"></script>
<script src="js/vizFunctions.js"></script>
<script src="js/main.js"></script>


</body>
</html>

\end{lstlisting}

\section{CSS}

\subsection*{root.css}

\begin{lstlisting}[style=css]
/* prefixed by https://autoprefixer.github.io (PostCSS: v7.0.26, autoprefixer: v9.7.3) */

/* changa-regular - latin */
@font-face {
  font-family: 'Changa';
  font-style: normal;
  font-weight: 400;
  src: url('fonts/changa-v9-latin-regular.eot'); /* IE9 Compat Modes */
  src: local(''),
       url('fonts/changa-v9-latin-regular.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('fonts/changa-v9-latin-regular.woff2') format('woff2'), /* Super Modern Browsers */
       url('fonts/changa-v9-latin-regular.woff') format('woff'), /* Modern Browsers */
       url('fonts/changa-v9-latin-regular.ttf') format('truetype'), /* Safari, Android, iOS */
       url('fonts/changa-v9-latin-regular.svg#Changa') format('svg'); /* Legacy iOS */
}

/* montserrat-regular - latin */
@font-face {
  font-family: 'Montserrat';
  font-style: normal;
  font-weight: 400;
  src: url('fonts/montserrat/montserrat-v14-latin-regular.eot'); /* IE9 Compat Modes */
  src: local('Montserrat Regular'), local('Montserrat-Regular'),
       url('fonts/montserrat-v14-latin-regular.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('fonts/montserrat-v14-latin-regular.woff2') format('woff2'), /* Super Modern Browsers */
       url('fonts/montserrat-v14-latin-regular.woff') format('woff'), /* Modern Browsers */
       url('fonts/montserrat-v14-latin-regular.ttf') format('truetype'), /* Safari, Android, iOS */
       url('fonts/montserrat-v14-latin-regular.svg#Montserrat') format('svg'); /* Legacy iOS */
}

:root {
    --main-blue: #45567d;
    --main-gray: #303841;
    --color-uni: #7a99ac;
    --color-uni-dark: #547387;

    --font-body: 'Montserrat';
    --font-rest: 'Changa';

    --height-header: 6rem;
    --height-footer: 3rem;

    --height-header-smartphone: 12rem;
    --height-footer-smartphone: 2rem;

    --height-slider-track: 0.6rem;
    --height-slider-thumb: 1.7rem;
    --slider-track-color:#A9A7A6;
    --slider-thumb-color: #ffffff;

    --height-input-box: 20%;

    --grid-width-viz: 32%;
    --grid-gap-viz: 3%;
  }

  .centerContent{
    width: 100%;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
  }

  .centerContentWithoutWidth{
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
  }

  .flexColumn{
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
        -ms-flex-direction: column;
            flex-direction: column;
    height: 100%;
  }

  .flexRow{
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
        -ms-flex-direction: row;
            flex-direction: row;
  }

  .alignCenter{
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
  }

  .noShrink{
    -ms-flex-negative: 0;
        flex-shrink: 0;
  }
  
  /* Fading animation */
  .fade {
    -webkit-animation-name: fade;
    -webkit-animation-duration: 1.5s;
    animation-name: fade;
    animation-duration: 1.5s;
  }
  
  @-webkit-keyframes fade {
    from {opacity: .4}
    to {opacity: 1}
  }
  
  @keyframes fade {
    from {opacity: .4}
    to {opacity: 1}
  }

/* Add animation (fade in the popup) */
@-webkit-keyframes fadeIn {
  from {opacity: 0;} 
  to {opacity: 1;}
}

@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity: 1;}
}
\end{lstlisting}


\subsection*{style.css}

\begin{lstlisting}[style=css]
/* prefixed by https://autoprefixer.github.io (PostCSS: v7.0.26, autoprefixer: v9.7.3) */

/* Base reset */
* {
  margin: 0;
  padding: 0;
}

html {
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  font-size: 10px;
  scroll-behavior: smooth;
  overflow: hidden;
  -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

/* Setze Border-Box für alle Elemente */
*, ::before, ::after { 
  -webkit-box-sizing: border-box; 
          box-sizing: border-box; 
}

body {
  font-family: 'Montserrat', serif;
  font-size: 1.4rem; /* 10px */
  font-weight: 400;
  line-height: 1.4;
  position: relative;
  color: black;
  overflow: hidden;
}

#backgroundImage{
  z-index: -1000;
  background: url(Hintergrund.jpg) no-repeat center center fixed;
  background-size: cover;
  -moz-background-size: cover;
  -webkit-background-size: cover;
  -o-background-size: cover;
  width: 100%;
  height: 100%;
  position: fixed;
}

h1,
h2 {
  font-family: 'Changa', sans-serif;
  font-weight: 700;
}

#header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 10rem;
  z-index: 10;

}

#headerNormal {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: justify;
    -ms-flex-pack: justify;
      justify-content: space-between;
  -webkit-box-align: center;
    -ms-flex-align: center;
      align-items: center;
  position: fixed;
  -ms-flex-negative: 0;
      flex-shrink: 0;
  width: 100%;
  height: 10rem;
  z-index: 10;
  color: white;
  background: var(--main-gray);
}

#headerSpecial {
  display: none;
  z-index: 11;
}

.popupHeaderSpecial p{
  padding: 0.3rem 10% 1rem 10%;
}

.textPopupSpecial {
  padding-bottom: 2rem;
}

#title{
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  height: 10rem;
  margin: 0 0 0 5rem;
}

header h1 {
  font-size: 2.5rem;
  width: 100%;
}

header p {
  font-style: italic;
  font-size: 1.2rem;
  width: 100%;
}

#logo {
    height: 70%;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
    -webkit-box-pack: end;
        -ms-flex-pack: end;
            justify-content: flex-end; 
    margin-right: 5rem; 
}

img  { 
    width: auto;
    height: 100%;
}

#main{
  position: fixed;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
  top: 10rem;
  bottom: var(--height-footer);
  left: 0;
  width: 100%;
  overflow: hidden;
  z-index: -10;
}

#container {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: center;
        -ms-flex-pack: center;
            justify-content: center;
    margin: 1.5rem auto 0 auto;
    width: 85%;
    max-width: 1400px;
}

#inputVariables{
  display: -ms-grid;
  display: grid;
  height: 100%;
  -ms-grid-rows: 16% 0.8% 16% 0.8% 16% 0.8% 16% 0.8% 16% 0.8% 16%;
  grid-template-rows: 16% 16% 16% 16% 16% 16%;
  grid-row-gap: 0.8%;
  -ms-grid-columns: 90%;
  grid-template-columns: 90%;
  width: 16%;
  min-width: 18rem;
}

#inputVariables > *:nth-child(1){
  -ms-grid-row: 1;
  -ms-grid-column: 1;
}

#inputVariables > *:nth-child(2){
  -ms-grid-row: 3;
  -ms-grid-column: 1;
}

#inputVariables > *:nth-child(3){
  -ms-grid-row: 5;
  -ms-grid-column: 1;
}

#inputVariables > *:nth-child(4){
  -ms-grid-row: 7;
  -ms-grid-column: 1;
}

#inputVariables > *:nth-child(5){
  -ms-grid-row: 9;
  -ms-grid-column: 1;
}

#inputVariables > *:nth-child(6){
  -ms-grid-row: 11;
  -ms-grid-column: 1;
}

.inputBoxen {
  width: 100%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  background-color: var(--color-uni);
  border-radius: 0.5rem;
  -webkit-user-select: none;
  -moz-user-select: none;
   -ms-user-select: none;
       user-select: none;
  -webkit-box-shadow: 0 0 0.5rem rgba(0,0,0,0.75);
          box-shadow: 0 0 0.5rem rgba(0,0,0,0.75);
}

.titleInputbox {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  height: 2.5rem;
  -webkit-box-flex: 0;
      -ms-flex-positive: 0;
          flex-grow: 0;
  width: 100%;
  background-color: white;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: justify;
      -ms-flex-pack: justify;
          justify-content: space-between;
  border-radius: 0.5rem 0.5rem 0 0;
  font-size: 1.3rem;
  position: relative;
}

.titleInputbox i {
  width: 2rem;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: start;
      -ms-flex-pack: start;
          justify-content: flex-start;
}

.titleInputbox p {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
  text-align: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}

.infoHeaderNormal {
    position: absolute;
    left: calc(100% + 2rem);
    width: 150%;
    background-color: white;
    -webkit-box-shadow: 0 0 1rem rgba(0,0,0,0.75);
            box-shadow: 0 0 1rem rgba(0,0,0,0.75);
    padding: 2rem;
    text-align: center;
    border-radius: 1rem;
}

.startDivAtTop {
  top: -25%;
}

#triangleTop {
  border-right: 2.5rem solid white;
}

.startDivNormal {
  top: -100%;
}

.startDivAtBottom {
  bottom: -100%;
}

.startDivMediumUp {
  bottom: -500%;
}

.visiblePopup {
  visibility: visible;
  opacity: 1;
  z-index: 12;
}

.notVisiblePopup {
  visibility: hidden;
  opacity: 0;
}

.infoHeaderNormal p {
  display: block;
  text-align: center;
}

.triangle {
  position: absolute;
  left: 100%;
  width: 0; 
  height: 0; 
  border-right: 2.3rem solid white;
  border-top: 1.5rem solid transparent;
  border-bottom: 1.5rem solid transparent;
  border-left: 0;
  z-index: 13;
}

.trianglePopupA {
  position: absolute;
  left: 0.6rem;
  width: 0; 
  height: 0; 
  border-right: 1.7rem solid white;
  border-top: 1.2rem solid transparent;
  border-bottom: 1.2rem solid transparent;
  border-left: 0;
  z-index: 13;
}

.formBox{
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
  width: 100%;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}

.inputSlide {
  width: 3rem;
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-webkit-box-pack: center;
	    -ms-flex-pack: center;
	        justify-content: center;
	-webkit-box-align: center;
	    -ms-flex-align: center;
	        align-items: center;
  cursor: pointer;
  -webkit-transition: 0.3s ease;
  -o-transition: 0.3s ease;
  transition: 0.3s ease;
  border-radius: 50%;
  font-size: 1.3rem;
  color: white;
  text-align: center;
  background-color: var(--slider-track-color);
}

.inputSlide:hover{
  background-color: white;
  color: #363636;
}

.inputPrev{
  margin-left: 0.5rem;
}

.inputNext{
  margin-right: 0.5rem;
}

#textStandardabweichung {
  font-size: 1.8rem;
}

.opacityLow {
  opacity: 0.4;
}

.opacityHigh {
  opacity: 1;
}

.noPointerEvents {
  cursor: not-allowed;
}

.PointerEvents {
  cursor: pointer;
}

.buttonStandardabweichung{
  cursor: not-allowed;
}

.buttonStandardabweichung:hover{
  color: white;
  background-color: var(--slider-track-color);
}

.iconFormBox {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}

.iconFormBox p {
  font-size: 0.8rem;
  padding: 0.5rem;
}

.fontAwesomeIcon {
  font-size: 3rem;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}

.fas { 
  -webkit-transform: scale(1.1,1); 
      -ms-transform: scale(1.1,1); 
          transform: scale(1.1,1);
}

.fa-times {
  color: #363636;
}

.popupsA .fa-times{
  color: inherit;
}

.fa-info-circle{
  color: #363636;
}

.fa-info-circle:hover{
  -webkit-filter: drop-shadow(0 0 1rem black);
          filter: drop-shadow(0 0 1rem black);
}

.clickIcon {
  cursor: pointer;
  -webkit-transition: 0.3s ease;
  -o-transition: 0.3s ease;
  transition: 0.3s ease;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.clickIcon:hover {
  color: lightgray;
}

.activeSex {
  color: lightgray;
}

#Standardabweichung {
  position: relative;
}

#popupAge{
  top: -100%;
}

#popupDeviation {
  top: -20%;
  z-index: 10;
  left: 100%;
  width: 30rem;
}

.popup {
  background-color: var(--color-uni);
  text-align: center;
  position: absolute;
  z-index: 1;
  display: none;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  margin-left: 2rem;
  border-radius: 1rem;
  -webkit-transition: 1s ease;
  -o-transition: 1s ease;
  transition: 1s ease;
}

.popupWithoutDisplay {
  background-color: var(--color-uni);
  text-align: center;
  position: absolute;
  z-index: 1;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  margin-left: 2rem;
  border-radius: 1rem;
  -webkit-transition: 1s ease;
  -o-transition: 1s ease;
  transition: 1s ease;
}

.showPopup {
  visibility: visible;
}

.mainPopup {
  padding: 2rem;
}

.popupsA {
  cursor: pointer;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  color: #363636;
  -webkit-transition: 0.3s ease;
  -o-transition: 0.3s ease;
  transition: 0.3s ease;
}

.popupsA:hover{
  color: lightgray;
}

.popupsA span {
  font-size: 1.3rem;
  font-weight: bold;
}

.headerPopup {
  width: 100%;
  font-size: 1.7rem;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  -webkit-box-pack: end;
      -ms-flex-pack: end;
          justify-content: flex-end;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding-right: 1rem;
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
  background-color: white;
  border-radius: 1rem 1rem 0 0;
}

.buttons{
  color: #363636;
  font-size: 1.7rem;
  text-decoration: none;
  font-weight: bold;
  cursor: pointer;
}

.previousButton {
  padding-left: 1rem;
  padding-right: 0.5rem;
}

.previousButton i {
  padding-right: 0.3rem;
}

.nextButton i {
  padding-left: 0.3rem;
}

.nextButton {
  padding-right: 1rem;
  padding-left: 0.5rem;
}

.closeButtonLeft i {
  padding-right: 1rem;
}

.closeButtonRight i {
  padding-left: 0.7rem;
}

.sliderContainer {
  width: 100%;
  height: 50%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
}

.sliderPopup {
  width: 95%;
}

.sliderText {
  position: relative;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  width: 100%;
  height: 50%;
  font-size: 2rem;
  font-family: var(--font-rest);
}

.sliderText p{
  font-size: 1.2rem;
  font-style: normal;
}

.sliderText span{
  font-size: 2rem;
}

.redo {
  position: absolute;
  right: 0.7rem;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  padding: 0.5rem;
  font-size: 1.1rem;
  cursor: pointer;
  background-color: #303841;
  border: 2px solid #999999;
  color: var(--color-uni);
  text-align: center;
  text-decoration: none;
  -webkit-transition-duration: 0.2s;
       -o-transition-duration: 0.2s;
          transition-duration: 0.2s;
  border-radius: 1rem;
  font-family: Trebuchet, Arial, sans-serif; font-weight: bold;
}

.redoSmartphone{
  display: none;
}

.sliderText .triangle {
  top: calc(50% - 1rem);
  left: calc(100% - 0.5rem);
  border-right: 1.5rem solid white;
  border-top: 1rem solid transparent;
  border-bottom: 1rem solid transparent;
}

.popupStandardwertUebernehmen{
  -webkit-transition-duration: 0.2s;
       -o-transition-duration: 0.2s;
          transition-duration: 0.2s;
}

.popupStandardwertUebernehmenInner{
  position: absolute;
  left: calc(100% + 0.9rem);
  top: calc(50% - 2rem);
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  background-color: white;
  z-index: 10;
  -webkit-box-shadow: 0 0 1rem rgba(0,0,0,0.75);
            box-shadow: 0 0 1rem rgba(0,0,0,0.75);
    padding: 1rem 2rem 1rem 2rem;
    text-align: center;
    border-radius: 1rem;
  font-family: var(--font-body);
  font-size: 1.2rem;
}

#display {
  background-color: white;
  border-radius: 1rem;
  height: 100%;
  width: 80%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-shadow: 0 0 0.5rem rgba(0,0,0,0.75);
          box-shadow: 0 0 0.5rem rgba(0,0,0,0.75);
  z-index: 5;
}

#vizHeader {
  width: 100%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  -webkit-box-pack: space-evenly;
      -ms-flex-pack: space-evenly;
          justify-content: space-evenly;
  height: 15%;
  background-color: lightgrey;
  border-radius: 1rem 1rem 0 0;
  min-height: 8rem;
}

#vizHeader .fontHeader {
  font-size: 2.5rem;
}

.vizHeaderIconPlusText {
  width: 50%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
}

.vizHeaderIcon {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  width: 15%;
  height: 80%;
  max-height: 6rem;
}

.fontHeader{
  font-family: var(--font-rest);
  font-size: 3rem;
}

.fontHeaderWithoutSize{
  font-family: var(--font-rest);
}

#calcRenteMain{
  position: relative;
}

#vorschlagIcon {
  cursor: pointer;
}

.popupVorschlagUebernehmen {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  position: absolute;
  top: 0;
  height: 100%;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
}

#popupVorschlagUebernehmenInfo {
  left: calc(100% + 2rem);
}

#popupVorschlagUebernehmenRedo {
  display: none;
  left: calc(100% + 4rem);
}

#popupVorschlag {
  position: absolute;
  top: 0.4rem;
  left: calc(100% + 4.5rem);
  font-family: var(--font-body);
  font-size: 1.4rem;
  display: none;
}

#popupVorschlag .trianglePopupA {
  top: 0.5rem;
}

#popupVorschlagBody{
  width: 45rem;
  max-width: 50vw;
}

#buttonRedo {
  background-color: #303841;
  border: 2px solid #999999;
  color: var(--color-uni);
  padding: 1.5rem 2.2rem;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 2rem;
  margin: 1rem 2rem 2rem 2rem;
  -webkit-transition-duration: 0.4s;
       -o-transition-duration: 0.4s;
          transition-duration: 0.4s;
  cursor: pointer;
  border-radius: 1rem;
  font-family: Trebuchet, Arial, sans-serif; font-weight: bold;
  
}

#buttonRedo:hover, .redo:hover{
  -webkit-box-shadow: 0 0 2rem rgba(0,0,0,0.75);
          box-shadow: 0 0 2rem rgba(0,0,0,0.75);
}

#vizMain{
	width: 100%;
  height: 85%;
  position: relative;
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-webkit-box-orient: vertical;
	-webkit-box-direction: normal;
	    -ms-flex-direction: column;
	        flex-direction: column;
	-webkit-box-pack: center;
	    -ms-flex-pack: center;
	        justify-content: center;
	-webkit-box-align: center;
	    -ms-flex-align: center;
	        align-items: center;
}

.slideshow {
	width: 92%;
  height: 100%;
}

#viz1{
	  display: -ms-grid;
	  display: grid;
	  -ms-grid-columns: 1fr 2rem 1fr 2rem 1fr;
	  grid-template-columns: 1fr 1fr 1fr;
	  grid-column-gap: 1rem;
	  -ms-grid-rows: auto auto auto;
	  grid-template-rows: auto auto auto;
    justify-items: center;
    -webkit-box-align: center;
        -ms-flex-align: center;
            align-items: center;
}

#viz1 > *:nth-child(1){
    -ms-grid-row: 1;
    -ms-grid-column: 1;
}

#viz1 > *:nth-child(2){
    -ms-grid-row: 1;
    -ms-grid-column: 3;
}

#viz1 > *:nth-child(3){
    -ms-grid-row: 1;
    -ms-grid-column: 5;
}

#viz1 > *:nth-child(4){
    -ms-grid-row: 2;
    -ms-grid-column: 1;
}

#viz1 > *:nth-child(5){
    -ms-grid-row: 2;
    -ms-grid-column: 3;
}

#viz1 > *:nth-child(6){
    -ms-grid-row: 2;
    -ms-grid-column: 5;
}

#viz1 > *:nth-child(7){
    -ms-grid-row: 3;
    -ms-grid-column: 1;
}

#viz1 > *:nth-child(8){
    -ms-grid-row: 3;
    -ms-grid-column: 3;
}

#viz1 > *:nth-child(9){
    -ms-grid-row: 3;
    -ms-grid-column: 5;
}

#viz2Header{
  padding-top: 2rem;
  padding-bottom: 2rem;
}

#viz2Display{
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
}

#viz2Histogram{
  width: 100%;
  height: 100%;
}

.svg-container {
  display: inline-block;
  position: relative;
  width: 100%;
  padding-bottom: 100%; /* aspect ratio */
  vertical-align: top;
  overflow: hidden;
}
.svg-content-responsive {
  display: inline-block;
  position: absolute;
  top: 10px;
  left: 0;
}

.reference-line {
  stroke: #363636;
  stroke-width: 0.7rem;
  stroke-dasharray: 8;
}

.tooltip {
  position: absolute;
  opacity: 0;
  min-width: 0.8rem;
  height: auto;
  background: none repeat scroll 0 0 lightgray;
  border: 0.1rem solid black;
  padding: 1.4rem;
  text-align: center;
  pointer-events: none;
  z-index: 100;
}

#viz3 {
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}


#viz3Header{
  padding-bottom: 2rem;
  padding-top: 2rem;
  text-align: center;
}

#viz3PartOver {
  width: 100%;
}

.viz3Quarters {
  width: 30%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.viz3QuartersIcon {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  width: 20%;
  height: 80%;
  max-height: 6rem;
}

#viz3PercentageAge {
  width: 100%;
}

.viz3PercentageAgeViz {
  width: 30%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.viz3PercentageAgeIcon {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  width: 20%;
  height: 80%;
  max-height: 6rem;
}

.viz3PercentageText {
  font-family: var(--font-rest);
  font-size: 1.3rem; 
  text-align: center;
}

.viz3PercentageAgeTextPerc {
  font-weight: bold; 
  font-size: 2rem;
}

#viz3SelectAgeContainer .centerContent {
  width: auto;
}

#viz3SelectAge {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
          flex-grow: 1;
  padding-top: 2rem;
  padding-bottom: 2rem;
}

#viz3SelectAgeHeader {
  padding-bottom: 2rem;
}

#viz3SelectAgeDisplay {
  padding: 0 4rem 0 4rem;
}
 
#viz3SelectAge .sliderContainer {
  height: 8rem;
  padding-bottom: 4rem;
}

#viz3SelectAge .inputSlide {
    width: 5rem;
    height: 3rem;
    font-size: 2rem;
}

.fontViz{
  font-family: var(--font-body);
  font-size: 1.7rem;
  text-align: center;
  padding-top: 0.5rem;
  font-weight: bold;
  font-style: italic;
}

.fontVizSmiley{
  width: 100%;
  font-family: var(--font-rest);
  font-size: 2rem;
  text-align: center;
  vertical-align: bottom;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  height: 8rem;
  padding-top: 2rem;
}

.fontVizSmiley b {
  font-size: 3rem;
}

.centerContentGrid {
  -ms-flex-item-align: end;
      align-self: flex-end;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}

.boxShadowBig{
  -webkit-filter: drop-shadow(0rem 0rem 1rem rgba(0,0,0,1));
          filter: drop-shadow(0rem 0rem 1rem rgba(0,0,0,1));
}

.boxShadowSmall{
  -webkit-filter: drop-shadow(0rem 0rem 0.3rem rgba(0,0,0,1));
          filter: drop-shadow(0rem 0rem 0.3rem rgba(0,0,0,1));

}

.textSmiley{
  padding-left: 2rem;
  height: 4rem;
}

#vizSlide {
  width: 100%;
  position: absolute;
  top: 0;
  bottom: 5rem;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 1;
      -ms-flex-positive: 1;
	-webkit-box-pack: space-evenly;
	    -ms-flex-pack: space-evenly;
	        justify-content: space-evenly;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
}

.changeSlide{
	width: 3%;
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-webkit-box-pack: center;
	    -ms-flex-pack: center;
	        justify-content: center;
	-webkit-box-align: center;
	    -ms-flex-align: center;
	        align-items: center;
  cursor: pointer;
  -webkit-transition: 0.3s ease;
  -o-transition: 0.3s ease;
  transition: 0.3s ease;
  border-radius: 0 3px 3px 0;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  font-size: 2.5rem;
  color: #363636;
  text-align: center;
}

.prev {
  margin-right: 1rem;
}

.next {
  margin-left: 1rem;
}

.changeSlide:hover{
	color: lightgrey;
}

.grid {
  stroke: lightgrey;
  opacity: 0.3;
}

#vizSlideIcons {
  width: 100%;
  position: absolute;
  display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-webkit-box-pack: center;
	    -ms-flex-pack: center;
	        justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 5rem;
  bottom: 0;
}

.vizSlideIconsDetail {
	width: 2.8rem;
	height: 2.8rem;
	display: -webkit-box;
	display: -ms-flexbox;
	display: flex;
	-webkit-box-pack: center;
	    -ms-flex-pack: center;
	        justify-content: center;
	-webkit-box-align: center;
	    -ms-flex-align: center;
	        align-items: center;
	background-color: #363636;
	border-radius: 50%;
	margin: auto 0.2vw auto 0.2vw;
  cursor: pointer;
  -webkit-transition: 0.3s ease;
  -o-transition: 0.3s ease;
  transition: 0.3s ease;
  font-size: 1.5rem;
  color: white;
}

.vizSlideIconsBox {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  height: 60%;
  padding: 0 10% 0 10%;
}

.activePage, .vizSlideIconsDetail:hover{
  background-color: lightgrey;
  color: #363636;
}

#viz2Test{
  position: absolute;
  top: -1000px;
  left: -1000px;
  padding-top: 2rem;
  padding-bottom: 2rem;
}

footer{
  height: 3rem;
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-pack: end;
      -ms-flex-pack: end;
          justify-content: flex-end;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding-right: 1rem;
  color: lightgray;
  z-index: -1;
}

#copyright {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  -webkit-box-pack: end;
      -ms-flex-pack: end;
          justify-content: flex-end;
  font-size: 1rem;
  padding-right: 1rem;
  cursor: pointer;
}

#infoFooter {
  position: relative;
  cursor: pointer;
}

#infoFooter .fa-info-circle{
  color: inherit;
}

#infoPopup {
    bottom: 4rem;
    right: 0rem;
    width: 65rem;
    max-width: 90vw;
    display: none;
}

.aStyling a{
  color: black;
}

.aStyling a:hover{
  color: #363636;
}

#mainInfoPopup {
  color: black;
}

#mainInfoPopup h3{
  margin-bottom: 0.5rem;
}

#copyrightIcons {
  display: -ms-grid;
  display: grid;
}

.imgFooter {
  width: 4rem;
}

.copyrightItemOverall {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  width: 100%;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  padding: 1rem 1rem 1rem 4rem;
}

.copyrightItemIcon {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
  -webkit-box-align: center;
      -ms-flex-align: center;
          align-items: center;
  width: 20rem;
}

.copyrightItemIcon p {
  padding-top: 0.3rem;
}

.copyrightItemDisclaimer {
  padding-left: 2rem;
}
\end{lstlisting}

\subsection*{mediaQueries.css}

\begin{lstlisting}[style=css]
/* prefixed by https://autoprefixer.github.io (PostCSS: v7.0.26, autoprefixer: v9.7.3) */

@media (min-width: 1401px) and (max-width: 1600px) {
    html {
        font-size: 8px
    }

}

@media (min-width: 1025px) and (max-width: 1400px) {
    html {
        font-size: 7px
    }

}


@media (min-width: 768px) and (max-width: 1024px) {
    html{
        font-size: 6.5px;
    }

}


/*Schriftgrößen anpassen bei Landscape-Darstellung*/

@media (max-width: 1500px) and (orientation: landscape) and (pointer: coarse) {
    html {
        font-size: 10px;
    }
}



@media (max-width: 1100px) and (orientation: landscape) and (pointer: coarse) {
    html {
        font-size: 9px;
    }
}

@media (max-width: 1024px) and (orientation: landscape) and (pointer: coarse){
    html {
        font-size: 8.5px;
    }
}

@media (max-width: 950px) and (orientation: landscape){
    html {
        font-size: 8px;
    }
}

@media (max-width: 900px) and (orientation: landscape){
    html {
        font-size: 7.5px;
    }
}

@media (max-width: 850px) and (orientation: landscape){
    html {
        font-size: 7px;
    }
}

@media (max-width: 800px) and (orientation: landscape){
    html {
        font-size: 6px;
    }
}

@media (max-width: 600px) and (orientation: landscape){
    html {
        font-size: 5px;
    }
}

@media (max-width: 500px) and (orientation: landscape){
    html {
        font-size: 3.5px;
    }
}


@media (max-width: 300px) and (orientation: landscape){
    html {
        font-size: 3px;
    }
}



/*Schriftgrößen anpassen bei Portraitdarstellung*/

@media (max-width: 1000px) and (orientation: portrait) {
    html {
        font-size: 9px;
    }
}

@media (max-width: 850px) and (orientation: portrait) {
    html {
        font-size: 8px;
    }
}


@media (max-width: 600px) and (orientation: portrait) {
    html {
        font-size: 7px;
    }
}

@media (max-width: 480px) and (orientation: portrait){
    html {
        font-size: 6px;
    }
}

@media (max-width: 350px) and (orientation: portrait){
    html {
        font-size: 5px;
    }
}

@media (max-width: 270px) and (orientation: portrait){
    html {
        font-size: 4.5px;
    }
}

@media (max-width: 230px) and (orientation: portrait){
    html {
        font-size: 3.5px;
    }
}

@media (max-width: 190px) and (orientation: portrait){
    html {
        font-size: 3px;
    }
}

@media (min-width: 200px) and (max-width: 480px) {

    #vizSlideIcons {
        height: 6rem;
    }
    
    .vizSlideIconsDetail {
        width: 4rem;
        height: 4rem;
        font-size: 2.5rem;
        margin: auto 0.5vw auto 0.5vw;
    }
}




@media (orientation: portrait), (max-width: 1024px), (pointer: coarse) and (orientation: landscape) {
    
    :root{
        --height-slider-track: 1rem;
        --height-slider-thumb: 3rem;
    }

    #header{
        height: 17rem;
        z-index: 10;
    }

    #headerSpecial p {
        font-size: 1.2rem;
        font-style: normal;
    }

    #headerNormal{
        height: 12rem;
    }


    #headerSpecial {
        position: fixed;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        height: 8rem;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
        font-size: 2.8rem;
        top: 12rem;
        left: 0;
        width: 100%;
        background-color: var(--color-uni);
        color: white; 
    }

    #inputVariables {
        display: none;
    }

    #container {
        width: 95%;
    }

    .smartphoneHeaderContainer {
        width: 16.6666666666666667%;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-direction: column;
                flex-direction: column;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        text-align: center;
        height: 8rem;
        position: relative;
    }



    .smartphoneHeaderBox{
        width: 100%;
        height: 100%;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-direction: column;
                flex-direction: column;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
    }

    .smartphoneHeaderBox p {
        padding-top: 1rem;
    }

    .smartphoneHeaderText {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
        -webkit-box-flex: 1;
            -ms-flex-positive: 1;
                flex-grow: 1;

        padding: 0.5rem;
    }

    .smartphoneIcons {
        width: 100%;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        height: 3.2rem;
        padding-top: 1rem;
    }

    .activeInput {
        background-color: var(--color-uni-dark);
    }



    #headerSpecial svg {
        fill: white;
        height: 3.2rem;
        width: auto;
    }

    .headerPopup i {
        text-align: center;
        font-size: 1.5rem;

    }

    .popupSmartphone {
        display: none;
    }

    .popupHeaderSpecial {
        position: absolute;
        width: 70vw;
        padding-bottom: 1rem;
        top: calc(100% + 1rem);
        background-color: var(--color-uni-dark);
        z-index: 10;
        border-radius: 2rem;
        -webkit-box-shadow: 0 0 1rem rgba(0,0,0,0.75);
                box-shadow: 0 0 1rem rgba(0,0,0,0.75);
    }

    .triangle {
        position: absolute;
        top: 100%;
        left: 30%;
        width: 0; 
        height: 0; 
        border-left: 2rem solid transparent;
        border-right: 2rem solid transparent;
        border-bottom: 2rem solid white;
        border-top: 0;
        z-index: 14;
    }

    .move10Left {
        left: 10%;
    }

    .move30Left {
        left: -30%;
    }

    .move150Left {
        left: -150%;
    }

    .move150Right {
        right: -150%;
    }

    .move30Right {
        right: -30%;
    }

    .move10Right {
        right: 10%;
    }

    .headerPopup {
        height: 5rem;
        margin-bottom: 1rem;
    }

    .sliderText p{
        font-size: 1.5rem;
        font-style: normal;
      }
      
      .sliderText span{
        font-size: 3rem;
      }

    .inputSlide {
        font-size: 3rem;
        width: 6rem;
    }

    #viz3SelectAge .inputSlide {
        font-size: 3rem;
        height: 5rem;
        width: 8rem;
    }

    #viz3SelectAgeHeader {
        padding-bottom: 0rem;
    }



    #textStandardabweichung {
        font-size: 2rem;
    }
      

    input[type=range] {
        height: 4rem;
    }

    #Standardabweichung {
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-direction: column;
                flex-direction: column;
    }

    #popupDeviationSpecialHeader {
        font-size: 5rem;
        -webkit-transform: rotate(270deg);
            -ms-transform: rotate(270deg);
                transform: rotate(270deg);
        width: 5rem;
        height: 5rem;
        padding-left: 3rem;
        padding-right: 3rem;
    }

    .headerPopup {
        -webkit-box-pack: justify;
            -ms-flex-pack: justify;
                justify-content: space-between;
    }

    #popupVorschlag .headerPopup, #infoPopup .headerPopup {
        -webkit-box-pack: end;
            -ms-flex-pack: end;
                justify-content: flex-end;
    }


    .mainPopup {
        padding: 0;
    }

    #popupVorschlag .mainPopup, #infoPopup .mainPopup {
        padding: 1.5rem;
    }

    .popupsA span {
        font-size: 1.7rem;
    }

    .popupsA {
        padding-right: 1rem;
    }


    #mainPopupDeviation {
        font-size: 1.3rem;
    }

    #popupVorschlagBody {
        max-width: 50vw;
        width: 45rem;
    }

    .sliderText {
        padding-bottom: 2rem;
    }

    .redo{
        top: -1.2rem;
        right: 3vw;
        font-size: 1.6rem;
        padding: 0.8rem;
    }

    .redo:hover{
        -webkit-box-shadow: 0 0 0rem rgba(0,0,0,0.75);
                box-shadow: 0 0 0rem rgba(0,0,0,0.75);
    }

    .redoSmartphone {
        display: inline;
        font-size: 1rem;
    }

    .popupStandardwertUebernehmen {
        display: none;
    }

    #main{
        top: 20rem;
        z-index: -1;
    }

    #display{
        width: 98%;
    }


    .slideshow{
        width: 85%;
    }

    .changeSlide{
        font-size: 5rem;
        font-weight: bold;
    }

    .changeSlide:hover{
        color: #363636;
    }

    #infoPopup {
        background-color: var(--color-uni-dark);
    }

}

@media (orientation: portrait) {
    #vizTopGood {
        grid-area: textGood;
    }

    #vizTopMedium {
        grid-area: textMedium;
    }

    #vizTopBad {
        grid-area: textBad;
    }

    #good {
        grid-area: smileyGood;
    }

    #medium {
        grid-area: smileyMedium;
    }

    #bad {
        grid-area: smileyBad;
    }

    #textGood {
        grid-area: percGood;
    }

    #textMedium {
        grid-area: percMedium;
    }
    
    #textBad {
        grid-area: percBad;
    }


    #viz1{
        -ms-grid-columns: auto 1fr;
        grid-template-columns: auto 1fr;
        -ms-grid-rows: auto;
        grid-template-rows: auto;
                    grid-template-areas: 
            "textGood smileyGood"
            "textGood percGood"
            "textMedium smileyMedium"
            "textMedium percMedium"
            "textBad smileyBad"
            "textBad percBad";

    }

    #viz2Header{
        height: 7rem;
    }

    #vizHeader{
        height: 15rem;
    }

    #viz3SelectAgeHeader {
        padding-top: 2rem;
    }

    .vizHeaderIconPlusText {
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-direction: column;
                flex-direction: column;
        text-align: center;
    }

    .vizHeaderIcon img {
        height: 5rem;
    }

    .vizHeaderIcon{
        height: 6rem;
    }

    #rente p {
        padding-left: 1rem;
        padding-right: 1rem;
    }


    #vizTopGood{
        -ms-grid-row: 1;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #vizTopMedium{
        -ms-grid-row: 3;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #vizTopBad{
        -ms-grid-row: 5;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #good{
        -ms-grid-row: 1;
        -ms-grid-column: 2;

    }


    #medium{
        -ms-grid-row: 3;
        -ms-grid-column: 2;

    }


    #bad{
        -ms-grid-row: 5;
        -ms-grid-column: 2;

    }


    #textGood{
        -ms-grid-row: 2;
        -ms-grid-column: 2;

    }


    #textMedium{
        -ms-grid-row: 4;
        -ms-grid-column: 2;

    }


    #textBad{
        -ms-grid-row: 6;
        -ms-grid-column: 2;

    }

    #viz3SelectAge {
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-direction: column;
                flex-direction: column;
        padding-top: 0;
    }

}

@media (orientation: portrait) {


    #vizTopGood{
        -ms-grid-row: 1;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #vizTopMedium{
        -ms-grid-row: 3;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #vizTopBad{
        -ms-grid-row: 5;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #good{
        -ms-grid-row: 1;
        -ms-grid-column: 2;

    }


    #medium{
        -ms-grid-row: 3;
        -ms-grid-column: 2;

    }


    #bad{
        -ms-grid-row: 5;
        -ms-grid-column: 2;

    }


    #textGood{
        -ms-grid-row: 2;
        -ms-grid-column: 2;

    }


    #textMedium{
        -ms-grid-row: 4;
        -ms-grid-column: 2;

    }


    #textBad{
        -ms-grid-row: 6;
        -ms-grid-column: 2;

    }

}

@media (orientation: portrait) {


    #vizTopGood{
        -ms-grid-row: 1;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #vizTopMedium{
        -ms-grid-row: 3;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #vizTopBad{
        -ms-grid-row: 5;
        -ms-grid-row-span: 2;
        -ms-grid-column: 1;

    }


    #good{
        -ms-grid-row: 1;
        -ms-grid-column: 2;

    }


    #medium{
        -ms-grid-row: 3;
        -ms-grid-column: 2;

    }


    #bad{
        -ms-grid-row: 5;
        -ms-grid-column: 2;

    }


    #textGood{
        -ms-grid-row: 2;
        -ms-grid-column: 2;

    }


    #textMedium{
        -ms-grid-row: 4;
        -ms-grid-column: 2;

    }


    #textBad{
        -ms-grid-row: 6;
        -ms-grid-column: 2;

    }

}


@media (orientation: landscape) and (max-width: 899px){
    body #headerSpecial {
        width: 17rem;
    }

    body #main{
        left: 17rem;
        width: calc(100% - 17rem);
    }

    body .smartphoneHeaderContainer{
        width: 17rem;
    }

    body .smartphoneIcons{
        padding-top: 0.5rem;
        height: 2.5rem;
    }

    body .smartphoneHeaderBox p{
        padding-top: 0.7rem;
        font-size: 1.3rem;
    }

    body .move10Right{
        bottom: calc(50% - 2rem);
    }

    body #mainPopupDeviation {
        bottom: 0;
        top: auto;
    }

    body div.vizHeaderIconPlusText:nth-child(1) {
        padding-left: 2rem;
    }

    body #rente {
        padding-left: 1rem;
    }

    body #viz3Header {
        padding-bottom: 0;
        padding-top: 0;
    }

    body #viz3Header h2{
        padding-top: 0.5rem;
    }
       
}

@media (orientation: landscape) and (max-width: 350px) {
    body #rente {
        padding-left: 2.5rem;
    }

    body #lebenserwartung {
        padding-left: 1rem;
    }
}


@media (orientation: landscape) and (max-width: 1024px), (pointer: coarse) and (orientation: landscape) {
    :root{
        --height-slider-track: 1rem;
        --height-slider-thumb: 3rem;
    }

    #header{
        height: 8rem;
    }

    #headerNormal{
        height: 8rem;
    }

    #headerSpecial {
        position: fixed;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-direction: column;
                flex-direction: column;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        -webkit-box-pack: space-evenly;
            -ms-flex-pack: space-evenly;
                justify-content: space-evenly;
        font-size: 2.8rem;
        top: 8rem;
        bottom: 0;
        left: 0;
        height: auto;
        width: 10rem;
        background-color: var(--color-uni);
        color: white; 
    }

    #inputVariables {
        display: none;
    }

    .smartphoneHeaderContainer {
        width: 10rem;
        height: 16.66666667%;
    }

    .smartphoneHeaderText {
        -webkit-box-flex: 0;
            -ms-flex-positive: 0;
                flex-grow: 0;
    }

    .triangle {
        position: absolute;
        top: calc(50% - 1.5rem);
        left: 100%;
        width: 0; 
        height: 0; 
        border-right: 1.8rem solid white;
        border-top: 1.5rem solid transparent;
        border-bottom: 1.5rem solid transparent;
        border-left: 0;

    }

    .triangleColorChange {
        border-right: 1.8rem solid var(--color-uni-dark);

    }

    .trianglePopupA {
        left: 100%;
        border-right: 2.3rem solid white;
        border-top: 1.5rem solid transparent;
        border-bottom: 1.5rem solid transparent;
      }

      #popupVorschlag .trianglePopupA {
        top: 0.8rem;
      }

    .colorUni {
        background-color: var(--color-uni);
    }

    #popupVorschlag {
        left: calc(100% + 5rem);
        top: 0rem;
    }


    .popupHeaderSpecial {
        width: 50vw;
    }

    #buttonRedo{
        padding: 2rem 4rem;
    }

    .move10Left {
        left: calc(100% + 1.5rem);
        top: calc(50% - 2.4rem);
    }

    .move30Left {
        left: calc(100% + 1.5rem);
        top: calc(50% - 2.4rem);
    }

    .move150Left {
        left: calc(100% + 1.5rem);
        top: calc(50% - 2.4rem);
    }

    .move150Right {
        left: calc(100% + 1.5rem);
        bottom: calc(50% - 2.4rem);
        top: auto;
    }

    .move30Right {
        left: calc(100% + 1.5rem);
        bottom: calc(50% - 2.4rem);
        top: auto;
    }

    .move10Right {
        left: calc(100% + 1.5rem);
        bottom: calc(50% - 2.4rem);
        top: auto;
    }

    #mainPopupDeviation {
        font-size: 1.3rem;
    }

    #main{
        top: 8rem;
        z-index: -1;
        left: 10rem;
        width: calc(100% - 10rem);
    }


}


@media (pointer: coarse) {
    .changeSlide {
        -webkit-transition: 0;
        -o-transition: 0;
        transition: 0;
    }

    .inputSlide:hover{
        background-color: var(--slider-track-color);
        color: white;
      }

      .clickIcon:hover {
        color: #363636;
      }

      .changeSlide:hover{
        color: #363636;
    }

    .vizSlideIconsDetail:hover{
        background-color: lightgray;
        color: #363636;
      }
}

@media (min-width: 900px) and (min-aspect-ratio: 6/2) {
    #container {
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
    }

    #inputVariables{
        width: 30%;
        -ms-grid-rows: 33.33% 33.33% 33.33%;
        grid-template-rows: 33.33% 33.33% 33.33%;
        -ms-grid-columns: 40% 1rem 40%;
        grid-template-columns: 40% 40%;
        grid-column-gap: 1rem;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;

    }

    #inputVariables > *:nth-child(1){
        -ms-grid-row: 1;
        -ms-grid-column: 1;

    }

    #inputVariables > *:nth-child(2){
        -ms-grid-row: 1;
        -ms-grid-column: 3;

    }

    #inputVariables > *:nth-child(3){
        -ms-grid-row: 2;
        -ms-grid-column: 1;

    }

    #inputVariables > *:nth-child(4){
        -ms-grid-row: 2;
        -ms-grid-column: 3;

    }

    #inputVariables > *:nth-child(5){
        -ms-grid-row: 3;
        -ms-grid-column: 1;

    }

    #inputVariables > *:nth-child(6){
        -ms-grid-row: 3;
        -ms-grid-column: 3;

    }

    #display{
        width: 70%;
    }

    .inputBoxen {
        height: 80%;
    }
    
}

@media (max-aspect-ratio: 4/5) and (max-width: 500px) {
    body #viz3Header {
        padding-top: 0;
        padding-bottom: 0;
      }

      body #viz3SelectAge {
        padding-top: 0;
      }

      body #viz3SelectAge .sliderContainer {
        height: auto;
        padding-bottom: 0;
      }

      body #viz3SelectAgeHeader{
          padding-top: 0.5rem;
      }

}

@media (min-aspect-ratio: 6/10) and (max-aspect-ratio: 1/1) {
    body #viz3Header {
        padding-bottom: 0;
    }

    body #viz3SelectAgeHeader {
        padding-top: 0;
    }

    body #viz3SelectAge .sliderContainer {
        height: auto;
        padding-bottom: 2rem;
    }
}

@media (orientation: landscape) and (max-height: 300px) {
    body .move30Right {
        bottom: -90%;
        max-height: 98vh;
        overflow-y: auto;
        overflow-x: hidden;
    }
}

\end{lstlisting}

\subsection*{rangeSlider.css}

\begin{lstlisting}[style=css]
/* prefixed by https://autoprefixer.github.io (PostCSS: v7.0.26, autoprefixer: v9.7.3) */

input[type=range] {
  height: 2rem;
  -webkit-appearance: none;
  margin: 0 5% 0 5%;
  width: 100%;
  background: inherit;
}
input[type=range]:focus {
  outline: none;
}

input[type=range]::-moz-focus-outer {
  border: 0;
}

input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: var(--height-slider-track);
  cursor: inherit;
  -webkit-box-shadow: 0px 0px 0px #000000;
          box-shadow: 0px 0px 0px #000000;
  background: var(--slider-track-color);
  border-radius: 0.5rem;
  border: 0.1rem solid #c5c2c2;
}
input[type=range]::-webkit-slider-thumb {
  -webkit-box-shadow: 0px 0px 0px #000000;
          box-shadow: 0px 0px 0px #000000;
  border: 0.1rem solid #000000;
  height: var(--height-slider-thumb);
  width: var(--height-slider-thumb);
  border-radius: var(--height-slider-thumb);
  background: var(--slider-thumb-color);
  cursor: inherit;
  -webkit-appearance: none;
  margin-top: -0.75rem;
}
input[type=range]:focus::-webkit-slider-runnable-track {
  background: var(--slider-track-color);
}
input[type=range]::-moz-range-track {
  width: 100%;
  height: var(--height-slider-track);
  cursor: inherit;
  box-shadow: 0px 0px 0px #000000;
  background: var(--slider-track-color);
  border-radius: 5px;
  border: 0.1rem solid #000000;
}
input[type=range]::-moz-range-thumb {
  box-shadow: 0px 0px 0px #000000;
  border: 0.1rem solid #000000;
  height: var(--height-slider-thumb);
  width: var(--height-slider-thumb);
  border-radius: var(--height-slider-thumb);
  background: var(--slider-thumb-color);
  cursor: inherit;
}
input[type=range]::-ms-track {
  width: 100%;
  height: 0.6rem;
  cursor: inherit;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
input[type=range]::-ms-fill-lower {
  background: #A9A7A6;
  border: 0.1rem solid #000000;
  border-radius: 1rem;
  box-shadow: 0px 0px 0px #000000;
}
input[type=range]::-ms-fill-upper {
  background: #A9A7A6;
  border: 0.1rem solid #000000;
  border-radius: 1rem;
  box-shadow: 0px 0px 0px #000000;
}
input[type=range]::-ms-thumb {
  margin-top: 0.1rem;
  box-shadow: 0px 0px 0px #000000;
  border: 0.1rem solid #000000;
  height: 1.7rem;
  width: 1.7rem;
  border-radius: 1.7rem;
  background: #ffffff;
  cursor: inherit;
}
input[type=range]:focus::-ms-fill-lower {
  background: #A9A7A6;
}
input[type=range]:focus::-ms-fill-upper {
  background: #A9A7A6;
}

\end{lstlisting}

\subsection*{onOffSwitch.css}

\begin{lstlisting}[style=css]
/*made by https://proto.io/freebies/onoff/*/

.onoffswitch {
    position: relative; width: 85px;
    -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;
}
.onoffswitch-checkbox {
    display: none;
}
.onoffswitch-label {
    display: block; overflow: hidden; cursor: pointer;
    border: 2px solid #999999; border-radius: 45px;
}
.onoffswitch-inner {
    display: block; width: 200%; margin-left: -100%;
    transition: margin 0.3s ease-in 0s;
}
.onoffswitch-inner:before, .onoffswitch-inner:after {
    display: block; float: left; width: 50%; height: 36px; padding: 0; line-height: 36px;
    font-size: 14px; color: white; font-family: Trebuchet, Arial, sans-serif; font-weight: bold;
    box-sizing: border-box;
}
.onoffswitch-inner:before {
    content: "JA";
    padding-left: 10px;
    background-color: #FFFFFF; color: #303841;
}
.onoffswitch-inner:after {
    content: "NEIN";
    padding-right: 10px;
    background-color: #303841; color: #7A99AC;
    text-align: right;
}
.onoffswitch-switch {
    display: block; width: 18px; margin: 9px;
    background: #FFFFFF;
    position: absolute; top: 0; bottom: 0;
    right: 45px;
    border: 2px solid #999999; border-radius: 45px;
    transition: all 0.3s ease-in 0s; 
}
.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {
    margin-left: 0;
}
.onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {
    right: 0px; 
}

\end{lstlisting}

\section{JavaScript}

\subsection*{variables.js}

\begin{lstlisting}[style=js]
/*Sammle alle Input-Felder mit ihrem zugehörigen Text in einzelnen Arrays*/

const renteneintrittsalter = {
    input: document.getElementById("rangeRenteneintrittsalter"),
    output: document.getElementById('textRenteneintrittsalter')
  }
  
const rentenaustrittsalter = {
    input: document.getElementById('rangeRentenaustrittsalter'),
    output: document.getElementById('textRentenaustrittsalter')
  }
  
const renditeerwartung = {
    input: document.getElementById('rangeRenditeerwartung'),
    output: document.getElementById('textRenditeerwartung')
  }
  
const standardabweichung = {
    input: document.getElementById('rangeStandardabweichung'),
    output: document.getElementById('textStandardabweichung')
  }

const einmalbetrag = {
    input: document.getElementById('rangeEinmalbetrag'),
    output: document.getElementById('textEinmalbetrag')
}

const renteRange = {
    input: document.getElementById('rangeRente'),
    output: document.getElementById('textRente')
}

const bindings = [renteneintrittsalter,rentenaustrittsalter,einmalbetrag, renteRange,
      standardabweichung, renditeerwartung]
  
/*Variablen für den Text, der bei der Visualisierung als Kopfzeile dient
 (Vorschlag zur optimalen Entnahme, Lebenserwartung)*/
const rente = document.getElementById("calcRente")
const percentageRentenaustrittsalter = document.getElementById("percentageRentenaustrittsalter")
const headerRentenaustrittsalter = document.getElementById("headerRentenaustrittsalter")
const prefixHeaderRentenaustrittsalter = document.getElementById("prefixPercentageRentenaustrittsalter")

//Checkbox Mu-Sigma Beziehung
const checkMuSigma = document.getElementById("checkboxMuSigma")

/*Festgelegte Werte für die Standardabweichung, die ausgewählt werden können
0 = kein Risiko
10 = geringes Risiko
...
40 = sehr hohes Risiko
*/
const sigmaArray = [0, 10, 20, 30, 40]

//Viz1-Variablen (Smiley-Chart)
const divGood = document.getElementById("good")
const divMedium = document.getElementById("medium")
const divBad = document.getElementById("bad")

const textGood = document.getElementById("textGood")
const textMedium = document.getElementById("textMedium")
const textBad = document.getElementById("textBad")

const tabelle = document.getElementById("tabelle")
const table1 = document.getElementById("table1")
const table1Body = document.getElementById("table1Body")
const table1Head = document.getElementById("table1Head")

//Viz3-Variablen (Donut-Chart)
const viz3Percentage = document.getElementById("viz3Percentages")


/*Variable des Visualisierungsbereich
v.a. zur Berechnung der Visualisierungsgrößen verwendet*/
const slide = document.getElementById("vizSlide")

//Unterscheidung der Header zwischen mobilem und nicht mobilem Gerät
const headerSpecial = [
  document.getElementById("popupStartEntnahme"),
  document.getElementById("popupEndeEntnahme"),
  document.getElementById("popupStartkapital"),
  document.getElementById("popupMonatlicheEntnahme"),
  document.getElementById("popupRisiko"),
  document.getElementById("popupRendite")
]

const headerNormal = [
  document.getElementById("Renteneintrittsalter"),
  document.getElementById("Rentenaustrittsalter"),
  document.getElementById("Einmalbetrag"),
  document.getElementById("Rente"),
  document.getElementById("Standardabweichung"),
  document.getElementById("Renditeerwartung")
]

const headerSpecialParent = document.getElementById("headerSpecial").children
const mainPopupDeviation = document.getElementById("mainPopupDeviation")

//globale Variable zur optimalen Bestimmung der Größe des Histograms (vgl. Erläuterungen zu div2Test in der index.html-Datei)
let sizeHistogramHelper


//RangeSlider für DonutChart
const donutChartSlider = document.getElementById("viz3SelectAgeRange")

//Array zum Speichern der Werte für Donut Chart
let viz3SelectAgesArray = new Array()
let viz3SelectAgesArray2 = new Array()

\end{lstlisting}

\subsection*{mediaQueries.js}

\begin{lstlisting}[style=js]
/*Festlegen relevanter Mediaqueries*/
const smartphone = [window.matchMedia("(orientation: portrait)"),
                    window.matchMedia("(orientation: landscape) and (max-width: 1024px)"),
                    window.matchMedia("(pointer: coarse) and (orientation: landscape)"),
                    window.matchMedia("(pointer: coarse)"),
                    window.matchMedia("(min-aspect-ratio: 2/1) and (max-width: 899px)"),
                    window.matchMedia("(min-aspect-ratio: 15/9)"),
                    window.matchMedia("(min-aspect-ratio: 2/1) and (max-width: 1600px)"),
                    window.matchMedia("(max-aspect-ratio: 4/5) and (max-width: 500px)"),
                    window.matchMedia("(min-aspect-ratio: 3/2) and (max-width: 400px)")]

for (let i = 0; i < smartphone.length; i++) {
    funcSmartphone()
    smartphone[i].addListener(funcSmartphone)
}

/*Grundlegende Funktion, welche die Anpassungen zwischen mobilem und nicht-mobilen Endgerät
vornimmt. Das heißt insbesondere ein schmaleres Logo und das Umhängen der Input-Felder an die Kopfzeile
im Falle eines mobilen Endgeräts. Analog dazu muss dies natürlich auch umgekehrt beim Wechsel
von mobilem Gerät zu nicht mobilem Gerät rückgängig gemacht werden.*/

function funcSmartphone() {

    let popupDeviation = document.getElementById("mainPopupDeviation").querySelectorAll("p")
    let logo = document.getElementById("imgLogo")
    let titleHeader = document.getElementById("title").querySelectorAll("h1")

    if(smartphone[0].matches) {
        //Zeilenumbruch in Titel hinzufügen falls das Endgerät länger als breit ist
        titleHeader[0].innerHTML = "Berechne Sie <br> Ihren Entnahmeplan"
    }else{
        titleHeader[0].innerHTML = "Berechne Sie Ihren Entnahmeplan"
    }

    if(smartphone[0].matches || smartphone[1].matches || smartphone[2].matches) {

         //Anpassen des Logos
         logo.src = "Uni_Ulm_Logo_Ausschnitt.svg"
    
        //Anhängen der Input-Felder an den HeaderSpecial
        for (let i = 0; i < bindings.length; i++) {

            let parent = bindings[i].input.parentElement.parentElement
            
            let headerBox = headerSpecial[i].querySelector(".popupHeaderSpecial")
            headerBox.appendChild(parent)
            if(i == 4) {
                let extraChild = headerBox.children[2]
                headerBox.children[2].remove
                headerBox.appendChild(extraChild)
                headerBox.appendChild(mainPopupDeviation)
            }

        }
        //Anpassen des Textes im Popup-Deviation
        popupDeviation[0].innerHTML = ""
    }else{
        //Anpassen des Logos
        logo.src = "Uni_ulm_logo.svg"

        //Anhängen der Input-Felder an den ursprünglichen Platz in der HTML-Struktur
        if(headerSpecial[4].querySelector(".popupHeaderSpecial").childElementCount >= 4) {
            for (let i = 0; i < headerNormal.length; i++) {
                let box = headerSpecial[i].querySelector(".popupHeaderSpecial")

                if(i == 4) {
                    document.getElementById("popupDeviation").append(mainPopupDeviation)
                    let extraChild = box.children[2]
                    headerNormal[i].children[1].prepend(extraChild)
                    let extraChild2 = box.children[2]
                    box.append(extraChild2)
                }else{
                    box = box.lastElementChild
                    headerNormal[i].appendChild(box)
                }  
            }
        }
         //Anpassen des Textes im Popup-Deviation
         popupDeviation[0].innerHTML = "Das <b>Risiko der Anlage</b> hängt von der gewählten Rendite ab.<br>"
    }

}

/*Funktion, welche das Öffnen und Schließen der Input-Felder im Falle eines
mobilen Endgerät ermöglicht. Alle nicht aktivierten Input-Felder werden geschlossen, das aktivierte dementsprechend
angezeigt*/
function openSliderPopup(n) {
    for(let i = 0; i < headerSpecial.length; i++) {
        if(i == n) {
            headerSpecial[n].style.display = "block"
            headerSpecial[n].parentNode.classList.add("activeInput")
        }else{
            closeSliderPopup(i)
        }
    }
}

/*Schließt das gewählte Popup des zugehörigen Input-Feldes im Falle eines mobilen Endgeräts*/
function closeSliderPopup(n) {
    headerSpecial[n].style.display = "none"
    headerSpecial[n].parentNode.classList.remove("activeInput")
}
\end{lstlisting}

\section*{pageSlider.js}

\begin{lstlisting}[style=js]
/*Skript/Funktionen, welche das Wechseln der verschiedenen Visualisierungsseiten
ermöglicht.

vgl. https://www.w3schools.com/howto/howto_js_slideshow.asp*/

let slideIndex = 1;
showSlides(slideIndex);

// Wählen der Darstellung über den Next-/Previous-Button
function plusSlides(n) {
  showSlides(slideIndex += n);
}

// Wählen der Darstellung über die Slide-Icons
function currentSlide(n) {
  showSlides(slideIndex = n);
}

//Funktion, die den Wechseln je nach übergebenen Parameter handelt
function showSlides(n) {
  let i;
  let slides = document.getElementsByClassName("slideshow")
  let dots = document.getElementsByClassName("vizSlideIconsDetail")
  
  if (n > slides.length) {slideIndex = 1}

  if (n < 1) {slideIndex = slides.length}

  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
  }

  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" activePage", "");
    }
  if(slideIndex == 1) {
    slides[slideIndex-1].style.display = "grid";
  }else{
    slides[slideIndex-1].style.display = "flex";
  }
  dots[slideIndex-1].className += " activePage";

}

/*Zusätzliche Funktion zum Swipen bei mobilen Geräten

Diese Funktionen basieren auf der Datei von John Doherty*/

function swipeLeft() {
  plusSlides(1)
}

function swipeRight() {
  plusSlides(-1)
}

slide.addEventListener('swiped-left', swipeLeft)
slide.addEventListener('swiped-right', swipeRight)
\end{lstlisting}

\subsection*{hilfsprozeduren.js}

\begin{lstlisting}[style=js]


function numberWithPoints (x) {
/*Funktion, die 1000-Trennzeichen bei Zahlen einfügt
vgl. https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript*/
return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")
}

function roundDigitsNum(x, num) {
  /*Rundet die Zahl x auf die angegebene Anzahl an Nachkommastellen num*/
  return (Math.round(x * Math.pow(10,num))/Math.pow(10,num))
}
  
function getStartAge() {
  return parseInt(renteneintrittsalter.input.value)
}

function getEndAge() {
  return parseInt(rentenaustrittsalter.input.value)
}

function calcLaufzeit() {
  return parseInt(rentenaustrittsalter.input.value) - parseInt(renteneintrittsalter.input.value)
}

function getEinmalbetrag() {
  return parseInt(einmalbetrag.input.value)
}

function getPerformance() {
  return parseInt(renditeerwartung.input.value)/100
}

function getDeviation() {
/*Die Zuordnung der Standardabweichung ist abhängig von den vorgegebenen, 
  möglichen Werten für die Standardabweichung
  
  Je nachdem, ob der Nutzer das Risiko an die Rendite gekoppelt hat oder nicht,
  wird der Wert ermittelt*/
  let helpInt
  if(checkMuSigma.checked == false) {
    helpInt = sigmaFromPerformance(parseInt(renditeerwartung.input.value))
  }else{
    switch(parseInt(standardabweichung.input.value)) {
      case 0:
        helpInt = sigmaArray[0]
        break
      case 1:
        helpInt = sigmaArray[1]
        break
      case 2:
        helpInt = sigmaArray[2]
        break
      case 3:
        helpInt = sigmaArray[3]
        break
      case 4:
        helpInt = sigmaArray[4]
        break
    }
  
  }
  return helpInt/100
  
}

function openPopup() {
  /*Öffnet das zusätzliche Fenster der Standardabweichung 
  (also, ob dieses Feld manuell bearbeitet werden kann)

  Abhängig von dem gewählten Medium wird zusätzlich der Pfeil der Darstellung
  angepasst*/
  var popup
  let arrow

  
  
  arrow = document.getElementById("popupDeviationSpecialHeader")
  
  if(arrow.style.transform == "rotate(90deg)") {
    if (smartphone[0].matches || smartphone[1].matches || smartphone[2].matches) {
      mainPopupDeviation.style.display = "block"
    }
    arrow.style.transform = "rotate(270deg)"
  }else{
    if (smartphone[0].matches || smartphone[1].matches || smartphone[2].matches) {
      mainPopupDeviation.style.display = "none"
    }
    arrow.style.transform = "rotate(90deg)"
  }
  
  /*}else if(smartphone[1].matches) {
    if(arrow.style.transform == "rotate(90deg)") {
      mainPopupDeviation.style.display = "inline-block"
      arrow.style.transform = "rotate(270deg)"
    }else{
      mainPopupDeviation.style.display = "none"
      arrow.style.transform = "rotate(90deg)"
    }
  */
  if(!(smartphone[0].matches || smartphone[1].matches)) {
    popup = document.getElementsByClassName("popup")
    popup[0].style.display = "flex"
  }
  
}

function closePopup(i) {
    var popup = document.getElementsByClassName("popup")
    popup[i].style.display = "none"
}

function closeAllPopups() {
  for(let i = 0; i < headerNormal.length; i++) {
    closeSliderPopup(i)
  }
  closeFooterPopup()
  closeProposalPopup()
  closePopup(0)

}


function changeArrowRotationOnOrientationChange() {
  /*Ändert die Ausrichtung des Pfeiles des zusätzlichen Popups der Standardabweichung*/
  arrow = document.getElementById("popupDeviationSpecialHeader")
    if(smartphone[0].matches || smartphone[2].matches) {
    if(arrow.style.transform == "rotate(270deg)") {
      arrow.style.transform = "rotate(270deg)"
    }else{
      arrow.style.transform = "rotate(90deg)"
    }
  }
}

function resizeChart() {
  /*Funktion, die beim Resize-Event getriggert wird*/
  slide.setAttribute("data-swipe-threshold", slide.clientWidth*0.5)
  //changeArrowRotationOnOrientationChange()
  updateValue()
  funcSmartphone()
}


//Wechselt in Abhängigkeit der Buttons Weiter/Zurück, dass die dementsprechenden Input-Felder gewechselt werden
function changeInputOnButtonClick(fromNum, toNum) {
  if(fromNum != -1) {
    closeSliderPopup(fromNum)
  }
  if(toNum != -1) {
    openSliderPopup(toNum)
  }
}

//Öffnen der Infopopups beim Hovern
function showInfoPopup(str) {
  let box = document.getElementById(str).children[0]
  let box2
  for(let i = 2; i < 4; i++) {
    box2 = box.children[i]
    box2.classList.remove("notVisiblePopup")
    box2.classList.add("visiblePopup")
  }
}

//Verstecken des Infopopups beim Verlassen des Bereichs-Hovern
function hideInfoPopup(str) {
  let box = document.getElementById(str).children[0]
  let box2
  for(let i = 2; i < 4; i++) {
    box2 = box.children[i]
    box2.classList.remove("visiblePopup")
    box2.classList.add("notVisiblePopup")
} 
}

//Öffnen des Popups zum Vorschlag übernehmen
function showStandardwertUebernehmenPopup(str) {
  let box = document.getElementById(str)
  box.classList.add("visiblePopup")
  box.classList.remove("notVisiblePopup")
}

//Öffnen des Popups zum Vorschlag übernehmen
function hideStandardwertUebernehmenPopup(str) {
  let box = document.getElementById(str)
  box.classList.remove("notvisiblePopup")
  box.classList.add("notVisiblePopup")
}

/*Funktion zur Zuordnung des Standardwertes eines jeden
Eingabefeldes: Diese wird beim Klicken auf den Reset-Knopf
ausgelöst*/
function vorschlagUebernehmen(n) {
  switch (n) {
    case 0:
      bindings[0].input.value = 67
      bindings[0].output.innerText = 67
      break
    case 1:
      bindings[1].input.value = 90
      bindings[1].output.innerText = 90
      fillPercentageHeader(90)
      break
    case 2:
      bindings[2].input.value = 100000
      bindings[2].output.innerText = numberWithPoints(100000) + "?"
      break
    case 3:
      fillRente(getEinmalbetrag(),getPerformance(),calcLaufzeit(), true)
      break
    case 5:
      bindings[5].input.value = 4
      bindings[5].output.innerText = 4 + "%"

      if(checkMuSigma.checked == false) {
        standardabweichung.input.disabled = true;
        let sigma = sigmaFromPerformance(parseInt(4))
        //from https://stackoverflow.com/questions/8584902/get-closest-number-out-of-array
        let closest = closestNumberInArrayIndex(sigma, sigmaArray)
        standardabweichung.input.value = closest
        standardabweichung.output.innerText = textDeviation(parseInt(closest))
      }
      break
  }
  updateValue()
}

//Gibt den Text für das Feld Standardabweichung zurück
function textDeviation(inputInt) {
  let helpText
      switch(inputInt) {
        case 0:
          helpText = "Kein Risiko"
          break
        case 1:
          helpText = "Geringes Risiko"
          break
        case 2:
          helpText = "Mittleres Risiko"
          break
        case 3:
          helpText = "Hohes Risiko"
          break
        case 4:
          helpText = "Sehr hohes Risiko"
          break
      }
  return helpText
}

function sigmaFromPerformance(performance) {
  /*Es gilt:
    0% = m*2%+c
    20% = m*6%+c

    => m = 5, c = -10
  */
  if(performance <= 2) {
    return 0
  }else{
    return 5*performance-10
  }
}

//Ermöglicht das Bearbeiten/Bzw. verhindert das Bearbeiten der Volatilität
function activateSigma() {
  let buttons = document.querySelectorAll(".buttonDeviation")
  
  if(checkMuSigma.checked == true) {
    standardabweichung.input.disabled = false
    standardabweichung.input.classList.remove("noPointerEvents")
    standardabweichung.input.classList.add("PointerEvents")
    let inputFieldDeviation = document.getElementById("wholeInputDeviation")
    let inputTextDeviation = document.getElementById("textStandardabweichung")
    
    //Erhöht die Sättigung des Eingabefeldes wenn der Nutzer das Risiko selbst auswählen kann
    inputTextDeviation.classList.remove("opacityLow")
    inputTextDeviation.classList.add("opacityHigh")
    inputFieldDeviation.classList.remove("opacityLow")
    inputFieldDeviation.classList.add("opacityHigh")

    for(let i = 0; i < buttons.length; i++) {
      buttons[i].classList.remove("buttonStandardabweichung")
    }
    updateValue()

  }else{
    standardabweichung.input.disabled = true
    standardabweichung.input.classList.add("noPointerEvents")
    standardabweichung.input.classList.remove("PointerEvents")

    //Vermindert die Sättigung des Eingabefeldes wenn das Risiko automatisch berechnet wird
    let inputFieldDeviation = document.getElementById("wholeInputDeviation")
    let inputTextDeviation = document.getElementById("textStandardabweichung")
    inputTextDeviation.classList.remove("opacityHigh")
    inputTextDeviation.classList.add("opacityLow")
    inputFieldDeviation.classList.remove("opacityHigh")
    inputFieldDeviation.classList.add("opacityLow")

    let sigma = sigmaFromPerformance(parseInt(renditeerwartung.input.value))
    //from https://stackoverflow.com/questions/8584902/get-closest-number-out-of-array
    let closest = closestNumberInArrayIndex(sigma, sigmaArray)
    standardabweichung.input.value = closest
    standardabweichung.output.innerText = textDeviation(parseInt(closest))

    for(let i = 0; i < buttons.length; i++) {
      buttons[i].classList.add("buttonStandardabweichung")
    }
  }
}

//from https://stackoverflow.com/questions/8584902/get-closest-number-out-of-array
function closestNumberInArrayIndex (num, arr) {
  var currIndex = 0;
  var curr = arr[0];
  var diff = Math.abs (num - curr);
  for (var val = 0; val < arr.length; val++) {
      var newdiff = Math.abs (num - arr[val]);
      if (newdiff <= diff) {
          diff = newdiff;
          curr = arr[val];
          currIndex = val
      }
  }
  if(currIndex == 0 && getPerformance() > 0.02) {
    currIndex++
  }
  return currIndex;
}

/*Funktion, die den zweiten Teil der Kopfzeile mit dem Anteil der Menschen, die das Endalter erreichen, berechnet*/
function fillPercentageHeader(endAge) {
  /*Quelle: Gomperz-Makeham-Gesetz Norberg, Ragnar: Basic Life Insurance Mathematics, http://web.math.ku.dk/~mogens/lifebook.pdf  / Seite 35)*/
  let startAge = 0
  headerRentenaustrittsalter.innerText = endAge + " Jahre"
  let helpNum = Math.exp(-0.0005*(endAge-startAge))*
    Math.exp(-0.000866969*Math.exp(0.087497925*(endAge-startAge)-1))

  if(helpNum <= 0.05) {
    percentageRentenaustrittsalter.innerText = Math.round(helpNum*100)+1 + "%"
    prefixHeaderRentenaustrittsalter.innerText = "Weniger als"
  }else if(helpNum >= 0.90) {
    percentageRentenaustrittsalter.innerText = 90 + "%"
    prefixHeaderRentenaustrittsalter.innerText = "Mehr als"
  }else{
    percentageRentenaustrittsalter.innerText = Math.ceil(helpNum*10)*10 + "%" 
    prefixHeaderRentenaustrittsalter.innerText = "Ca."
  }
}

/*Erhöht/Vermindert den Range Slider Wert eines Eingabefeldes: 
Wird durch das Klicken auf die Felder neben den RangeSlidern ausgelöst*/
function changeRangeValue(idRangeName, plusMinus) {
  let input = document.getElementById(idRangeName)

  /*Wichtig: Voraussetzung, dass dies funktioniert ist, 
  dass Text und Range ID identische Suffix-Bezeichnungen haben*/
  let output = document.getElementById(idRangeName.replace("range","text"))
  let step
  
  if(isNaN(parseInt(input.step))) {
    step = 1
  }else{
    step = parseInt(input.step)
  }

  if(plusMinus == 1) {
    input.value = parseInt(input.value) + step
  }else{
    input.value = parseInt(input.value) - step
  }

  if(idRangeName == "rangeEinmalbetrag") {
    if(parseInt(input.value) <= parseInt(renteRange.input.value)*12) {
      window.alert("Die monatliche Entnahme darf nicht höher sein, als das Startkapital durch 12 Monate dividiert!")
      input.value = Math.ceil(parseInt(renteRange.input.value)*12/5000)*5000
    }
    output.innerText = numberWithPoints(input.value) + "?"
  }else if(input.id == "rangeRenteneintrittsalter") {
    if(parseInt(input.value) >= parseInt(rentenaustrittsalter.input.value)) {
      window.alert("Das Rentenaustrittsalter muss mindestens ein Jahr über dem Renteneintrittsalter liegen!")
      input.value = parseInt(rentenaustrittsalter.input.value) - step
      renteneintrittsalter.input.value = rentenaustrittsalter.input.value - step
    }
    output.innerText = input.value
    renteneintrittsalter.input.value = parseInt(input.value)

    rentenaustrittsalter.input.min = parseInt(input.value) + step
  }else if(input.id == "rangeRentenaustrittsalter") {
    if(parseInt(input.value) <= parseInt(renteneintrittsalter.input.value)) {
        window.alert("Das Rentenaustrittsalter muss mindestens ein Jahr über dem Renteneintrittsalter liegen!")
        input.value = parseInt(renteneintrittsalter.input.value) + step
        output.innerText = input.value
    }
    output.innerText = input.value
    rentenaustrittsalter.input.value = parseInt(input.value)

    renteneintrittsalter.input.max = Math.min(parseInt(input.value) - 1,75)


  }else if (idRangeName == "rangeRente"){
    if(parseInt(input.value)*12 > parseInt(einmalbetrag.input.value)) {
      window.alert("Die monatliche Entnahme darf nicht höher sein, als das Startkapital durch 12 Monate dividiert!")
      input.value = parseInt(einmalbetrag.input.value) - step
    }
    output.innerText = numberWithPoints(input.value) + "?"
  }else if(idRangeName == "rangeStandardabweichung" && checkMuSigma.checked == true) {
    output.innerText = textDeviation(parseInt(input.value))
  }else if(idRangeName == "rangeRenditeerwartung"){
    output.innerText = input.value + "%"

    if(checkMuSigma.checked == false) {
      standardabweichung.input.disabled = true;
      let sigma = sigmaFromPerformance(parseInt(binding.input.value))
      //from https://stackoverflow.com/questions/8584902/get-closest-number-out-of-array
      let closest = closestNumberInArrayIndex(sigma, sigmaArray)
      standardabweichung.input.value = closest
      standardabweichung.output.innerText = textDeviation(parseInt(closest))
    }
  }else{
    output.innerText = input.value
  }
  
  
  if(idRangeName!="rangeRente") {
    fillRente(getEinmalbetrag(), getPerformance(), calcLaufzeit(), false)
  }
  calculateViz(getPerformance(),getDeviation(), getEinmalbetrag(),
  parseInt(renteneintrittsalter.input.value), parseInt(rentenaustrittsalter.input.value))
  fillPercentageHeader(parseInt(rentenaustrittsalter.input.value))
}

/*Spezielle Behandlung des Eingabefeldes der Standardabweichung:
Das Klick-Event soll nur dann etwas bewirken, wenn die Checkbox zur Kopplung
von Mu und Sigma aktiviert ist, der Nutzer also das Risiko selbstständig auswählt*/
function changeRangeValueDeviation(idRangeName, plusMinus) {
  if(checkMuSigma.checked == true) {
    changeRangeValue(idRangeName, plusMinus)
  }
}

function openDeviationPopup() {
  if(standardabweichung.input.disabled == true) {
    openPopup()
  }
}

function openFooterPopup() {
  let footerPopup = document.getElementById("infoPopup")
  footerPopup.style.display = "inline"
}

function closeFooterPopup() {
  let footerPopup = document.getElementById("infoPopup")
  footerPopup.style.display = "none"
}

\end{lstlisting}

\subsection*{renteBerechnen.js}

\begin{lstlisting}[style=js]
/*Berechnet für einen vorgegeben Wert der Rente, Performance, ... den Wert der Entnahme
am Ende der Laufzeit. Diese Funktion wird benötigt, um schließlich zwei Werte zu bestimmen, welche
die lineare Abhängigkeit der optimalen Entnahme und der anderen Variablen zu beschreiben.*/

function evaluate(varEinmalbetrag, varRente, varPerformance, varLaufzeit) {
  let accountValue = varEinmalbetrag
  for(let i = 0; i < varLaufzeit; i++) {
      accountValue = (accountValue-varRente)*(1+varPerformance)
  }

  return accountValue;
}

/*Mit zwei Werten (0 und Einmalbetrag) wird schließlich die lineare Abhängigkeit bestimmt,
die eine optimale Entnahme berechnet.*/

function calcRente(varEinmalbetrag, varPerformance, varLaufzeit) {
  let a = 0
  let b = varEinmalbetrag
  let fa = evaluate(varEinmalbetrag,a,varPerformance,varLaufzeit)
  let fb = evaluate(varEinmalbetrag,b,varPerformance,varLaufzeit)
  
  let m = (fb-fa)/(b-a)
  let n = fa - m*a

  return -n/m
}

//Befüllt das Feld des Vorschlags mit der optimalen Entnahme unter Aufruf der oberen beiden Funktionen
function fillRente(einmalbetrag, performance, laufzeit, boolResetRente) {
  
  let renteVal = Math.round(calcRente(einmalbetrag,performance,laufzeit)/(12*10))*10
  

  renteRange.input.min = Math.min(renteRange.input.min, Math.floor(Math.round(renteVal - 0.4*renteVal)/10)*10)
  renteRange.input.max = Math.floor(Math.min(Math.max(renteRange.input.max, Math.ceil(Math.round(renteVal + 0.4*renteVal)/10)*10), getEinmalbetrag()/12))
  renteRange.input.step = 10

  if(boolResetRente == true) {
      renteRange.input.min = Math.floor(Math.round(renteVal - 0.4*renteVal)/10)*10
      renteRange.input.max = Math.ceil(Math.round(renteVal + 0.4*renteVal)/10)*10
      renteRange.input.value = renteVal
      renteRange.output.innerText = numberWithPoints(renteVal) + "?"
  }
  rente.innerText = numberWithPoints(renteVal) + "?"
}

/*Funktion, die den Vorschlag der monatlichen Rente übernimmt und
die Visualisierung dementsprechend anpasst*/
function resetProposal() {
  fillRente(getEinmalbetrag(),getPerformance(),calcLaufzeit(), true)
  updateValue()
  closeProposalPopup()
}

function closeProposalPopup() {
  let proposalPopup = document.getElementById("popupVorschlag")
  proposalPopup.style.display = "none"
}

function openProposalPopup() {
  let proposalPopup = document.getElementById("popupVorschlag")
  proposalPopup.style.display = "inline"
}
\end{lstlisting}

\subsection*{blackScholesModel.js}

\begin{lstlisting}[style=js]
//Abhängig vom Device soll die Anzahl der Iterationen angepasst werden
let iterations
if(smartphone[3].matches) {
    iterations = 5000
}else{
    iterations = 10000
}

//Modelliert den Black-Scholes-Prozess unter der Wahl der Parameter. Dabei wird die d3-RandomNormal-Library verwendet
//https://github.com/d3/d3-random
function blackScholesProcess(mu, sigma, retArray, currentStateArray) {

    let normalDist = d3.randomNormal(0,1)  
    let i = retArray.length
    let randNum = normalDist()
    currentStateArray.push(
    currentStateArray[i-1]*Math.exp((mu-0.5*Math.pow(sigma,2)+sigma*randNum)))
    retArray.push(currentStateArray[i]/currentStateArray[i-1]-1)

    return [retArray, currentStateArray]
}


/*Modelliert EINEN kompletten Entnahmeprozess unter Berücksichtigung der Black-Scholes-Formel*/
function calcAgeProzess(performance, sigma, einmalbetrag, renteVal, laufzeit) {

    

    let iVorEntnahme = einmalbetrag
    let helpArray = new Array()
    helpArray.push(einmalbetrag)
    let i = 1

    let renditeArray = new Array()
    let currentStateArray = new Array()
    renditeArray.push(0)
    currentStateArray.push(1)
    while (true) {
        
        [renditeArray, currentStateArray] = blackScholesProcess(Math.log(1+performance),sigma,renditeArray, currentStateArray)
        let iBlackScholes = roundDigitsNum(renditeArray[i],4)
        let iNachEntnahme = roundDigitsNum(iVorEntnahme-renteVal,2)

        /*Abbruchbedingung: Wenn der Betrag kleiner als eine Toleranzmenge ist(0.005*einmalbetrag) oder
        die Iterationen die Laufzeit um 20 Jahre überschreitet wird abgebrochen. Die zweite Bedingung dient lediglich
        zur Absicherung und wird eigentlich nicht verwendet*/
        if(i > laufzeit + 20 || iNachEntnahme <= 0.005*einmalbetrag) {
            break
        }else if(i == 100) {
            break
        }else{
            iVorEntnahme = roundDigitsNum(iNachEntnahme*(1+iBlackScholes),2)
            helpArray.push(iVorEntnahme)
        }
        i++
    }
    return i
}

/*Simuliert den Entnahmeprozess je nach Wahl der iterations dementsprechend häufig und gibt das Ergebnis
an die Visualisierungsfunktionen (vizFunctions) weiter*/
function calculateViz(performance, sigma, einmalbetrag, alterStart, alterEnde) {

    //Abhängig von den Input-Parametern wird der Zufallsgenerator geseeted
    Math.seedrandom("Test" + performance + sigma + einmalbetrag + alterStart + alterEnde)    

    const toleranz = 1
    
    const laufzeit = alterEnde-alterStart
    let renteVal = renteRange.input.value*12

    let smileyArray = [0,0,0]
    let histogramArray = new Array()
    let agesArray = new Array()
    let agesArray2 = new Array()

    //Setze die beiden globalen Arrays auf ein leeres Array zurück
    viz3SelectAgesArray.length = 0
    viz3SelectAgesArray2.length = 0

    /*Wahl der angezeigten Altersgrößen für das Donut-Chart und Vorbereiten der Arrays
    zum Verarbeiten der Simulationen*/
    let startAgePercentage = Math.ceil((alterStart + 6)/5)*5
    let endAgePercentage = Math.ceil((alterEnde+11)/5)*5
    if(alterEnde - alterStart < 5) {
        for(let j = startAgePercentage-5; j < startAgePercentage + 5; j+=5) {
            agesArray.push(j)
            agesArray2.push(0)
        }
    }else if(endAgePercentage-startAgePercentage > 25) {
        for(let j = startAgePercentage; j <= endAgePercentage; j+=10) {
                agesArray.push(j)
                agesArray2.push(0)
        }
    }else{
        for(let j = startAgePercentage; j <= endAgePercentage; j+=5) {
            agesArray.push(j)
            agesArray2.push(0)
        }
    }

    for(let j = alterStart + 1; j <= endAgePercentage; j++) {
        viz3SelectAgesArray.push(j)
        viz3SelectAgesArray2.push(0)
    }
    
    /*Hauptschleife der Funktion, welche die Simulation je nach Wahl der iterations ausführt
    und die dementsprechenden Werte in die Viz-Arrays speichert*/
    for(let i = 0; i<iterations; i++) {
        let compVal = calcAgeProzess(performance,sigma,einmalbetrag,renteVal, laufzeit)
        histogramArray.push(compVal+alterStart)
        if(compVal < laufzeit-toleranz) {
            smileyArray[0]++
        }else if(compVal > laufzeit+toleranz) {
            smileyArray[2]++
        }else{
            smileyArray[1]++
        }

        for(let j = 0; j < agesArray.length; j++) {
            if (compVal + alterStart >= agesArray[j]) {
                agesArray2[j]++
            }
        }

        for(let j = 0; j < viz3SelectAgesArray.length; j++) {
            if (compVal + alterStart >= viz3SelectAgesArray[j]) {
                viz3SelectAgesArray2[j]++
            }
        }

    }

    //Aufruf der Visualisierungs-Funktionen mit den berechneten Informationen von zuvor
    vizSmiley(smileyArray)
    vizHistogram(histogramArray, sigma, alterStart, alterEnde, toleranz)
    vizDifferentAges(agesArray, agesArray2, iterations)
}
\end{lstlisting}

\subsection*{vizFunctions.js}

\begin{lstlisting}[style=js]
/*Deklariere drei Variablen zur Berechnung verschiedener Größen. 
Da diese erst während der Laufzeit ermittelt werden können werden diese als globale
Variablen deklariert*/
let widthHelper = 0
let heightHelper = 0
let smileyHelpWidth = 0


function vizSmiley(arr) {
    //Größenbestimmung - viz2Test hat Größe 6rem
    let elem = document.getElementById("viz2Test")
    sizeHistogramHelper = elem.offsetHeight


    let sum = arr[0] + arr[1] + arr[2]
    let max = arr.indexOf(Math.max(...arr))
    
    let varBad = Math.round(arr[0]/sum*100)
    let varMedium = Math.round(arr[1]/sum*100)
    let varGood = Math.round(arr[2]/sum*100)

    let container = document.getElementById("vizSlide")
    let help = document.getElementById("vizTopGood")
    let help2 = document.getElementById("textGood")

    if(help.clientWidth != 0) {
        smileyHelpWidth = help.clientWidth
    }

    let height
    let heightStart
    if(smartphone[0].matches) {
        if(help2.clientHeight = 0) {
            height = (container.clientHeight - 3*sizeHistogramHelper)/3
        }else{
            height = (container.clientHeight - 3*help2.clientHeight)/3
        }
        
        heightStart = height*0.95
    }else{
        if(smileyHelpWidth == 0) {
            height = container.clientHeight - 4/3*sizeHistogramHelper - 2/3*sizeHistogramHelper
        }else{
            height = container.clientHeight - help.clientHeight - help2.clientHeight
        }
        
        heightStart = height*0.85
        heightStart = Math.min(heightStart, container.clientWidth/3)
    }

    textBad.innerText = varBad + "%"
    textMedium.innerText = varMedium + "%"
    textGood.innerText = varGood + "%"

    let varMaxWidth = 0.97

    if(smartphone[0].matches) {
        varMaxWidth = heightStart/smileyHelpWidth
    }

    divBad.style.width = smileyHelpWidth*varMaxWidth + "px"
    divMedium.style.width = smileyHelpWidth*varMaxWidth + "px"
    divGood.style.width = smileyHelpWidth*varMaxWidth + "px"

    switch(max) {
        case 0: 
            divBad.style.height = Math.min(smileyHelpWidth*varMaxWidth, heightStart) + "px"
            if (varMedium/varBad < 0.2) {
                divMedium.style.height = Math.min(smileyHelpWidth*varMaxWidth, 0.2*heightStart) + "px"
            }else{
                divMedium.style.height = Math.min(smileyHelpWidth*varMaxWidth, Math.round(varMedium/varBad*heightStart)) + "px"
            }

            if (varGood/varBad < 0.2) {
                divGood.style.height = Math.min(smileyHelpWidth*varMaxWidth, 0.2*heightStart) + "px"
            }else{
                divGood.style.height = Math.min(smileyHelpWidth*varMaxWidth, Math.round(varGood/varBad*heightStart)) + "px"
            }
            break
        case 1:
            divMedium.style.height = Math.min(smileyHelpWidth*varMaxWidth, heightStart) + "px"
            
            if (varBad/varMedium < 0.2) {
                divBad.style.height = Math.min(smileyHelpWidth*varMaxWidth, 0.2*heightStart) + "px";
            }else{
                divBad.style.height = Math.min(smileyHelpWidth*varMaxWidth, Math.round(varBad/varMedium*heightStart)) + "px"
            }

            if (varGood/varMedium < 0.2) {
                divGood.style.height = Math.min(smileyHelpWidth*varMaxWidth, 0.2*heightStart) + "px"
            }else{
                divGood.style.height = Math.min(smileyHelpWidth*varMaxWidth, Math.round(varGood/varMedium*heightStart)) + "px"
            }
            break
        case 2:
            divGood.style.height = Math.min(smileyHelpWidth*varMaxWidth, Math.min(smileyHelpWidth*varMaxWidth, heightStart)) + "px"
            
            if (varBad/varGood < 0.2) {
                divBad.style.height = Math.min(smileyHelpWidth*varMaxWidth, 0.2*heightStart) + "px"
            }else{
                divBad.style.height = Math.min(smileyHelpWidth*varMaxWidth, Math.round(varBad/varGood*heightStart)) + "px"
            }
            
            if (varMedium/varGood < 0.2) {
                divMedium.style.height = Math.min(smileyHelpWidth*varMaxWidth, 0.2*heightStart) + "px"
            }else{
                divMedium.style.height = Math.min(smileyHelpWidth*varMaxWidth, Math.round(varMedium/varGood*heightStart)) + "px"
            }
            break
        default: 
            divBad.style.height = heightStart + "px"
            divMedium.style.height = heightStart + "px"
            divGood.style.height = heightStart + "px"   
    }
}

//Donut-Chart-Darstellung
function vizDifferentAges(agesArr, numbersAgesArr, iterations) {
    while (viz3Percentage.firstChild) {
        viz3Percentage.removeChild(viz3Percentage.firstChild);
    }

    let container = document.getElementById("vizSlide")
    let changeVizIcons = container.lastElementChild
    let width2 = container.clientWidth - 2*changeVizIcons.clientWidth;
    let height2
    let width3
    let height3
    let heightComp
    let bool = true
    document.getElementById("viz3SelectAgeContainer").style.display = "flex"
    if(smartphone[6].matches || smartphone[8].matches) {
        height2 = (container.clientHeight - sizeHistogramHelper)*0.8
        bool = false
        document.getElementById("viz3SelectAgeContainer").style.display = "none"
        document.getElementById("viz3").style.alignItems = "space-evenly"
    }else{
        if(smartphone[0].matches) {
            height2 = (container.clientHeight - sizeHistogramHelper)*0.33
        }else{
            height2 = (container.clientHeight - sizeHistogramHelper)*0.24
        }
        if(smartphone[0].matches) {
            height3 = (container.clientHeight - sizeHistogramHelper)*0.8 - 2.8*sizeHistogramHelper
            heightComp = (container.clientHeight - sizeHistogramHelper)*0.8 - 2*sizeHistogramHelper
        }else{
            height3 = (container.clientHeight - sizeHistogramHelper)*0.8 - 3*sizeHistogramHelper
            heightComp = height3
        }
        if (heightComp < height2) {
            bool = false
            document.getElementById("viz3SelectAgeContainer").style.display = "none"
            height2 = (container.clientHeight - sizeHistogramHelper)*0.9
            document.getElementById("viz3").style.alignItems = "space-evenly"
        }else{
            if(smartphone[0].matches) {
                document.getElementById("viz3").style.justifyContent = "center"
            }else{
                document.getElementById("viz3").style.alignItems = "center"
            }
        }
        width3 = Math.min(height3, width2)
    }
    
    let helpArray = new Array(2)
   
    for(let j = 0; j < agesArr.length; j++) {
        helpArray[0] = numbersAgesArr[j]
        helpArray[1] = iterations-numbersAgesArr[j]
        numbersAgesArr[j] = Math.round(numbersAgesArr[j]/iterations*100)

        
        let mainDiv = document.createElement("div")
        mainDiv.className = "centerContent flexColumn"
        mainDiv.style.width = 1/agesArr.length*width2 + "px"
        mainDiv.style.height = Math.min(height2, 1/agesArr.length*width2)

        displayDonut(agesArr, numbersAgesArr, mainDiv, j, width2,  Math.min(height2, 1/agesArr.length*width2), helpArray, j)

       

        viz3Percentage.appendChild(mainDiv)

    }

    widthHelper = width3
    heightHelper = height3

    //Erstellen des Divs zum Auswählen des Alters
    if(!smartphone[4].matches && bool == true) {
        if(smartphone[7].matches){
            height3 = height3*0.8
            heightHelper = height3
        }

        let container2 = document.getElementById("viz3SelectAgeDonut")
        container2.innerHTML = ""
        let j = Math.round((viz3SelectAgesArray.length-1)/2)
        helpArray[0] = viz3SelectAgesArray2[j]
        helpArray[1] = iterations - viz3SelectAgesArray2[j]

        //Anpassen der Grenzen für den Slider
        donutChartSlider.min = viz3SelectAgesArray[0]
        donutChartSlider.max = viz3SelectAgesArray[viz3SelectAgesArray.length-1]
        donutChartSlider.value = viz3SelectAgesArray[j]

        let mainDiv = document.createElement("div")
        mainDiv.className = "centerContent flexColumn"
        mainDiv.style.width = "100%"
        mainDiv.style.height = height3
        mainDiv.style.alignItems = "center"
        mainDiv.id = "donutInputDiv"

        agesArr = [viz3SelectAgesArray[j]]
        numbersAgesArr =  [Math.round(viz3SelectAgesArray2[j]/iterations*100)]
    
        displayDonut(agesArr, numbersAgesArr, mainDiv, 0, width3, height3, helpArray, -1)
        
        container2.appendChild(mainDiv)

    }

}

/*Funktion, die das klicken bzw. ändern des Input-Feldes des Range Sliders verarbeitet
Es wird der gespeicherte Wert des globalen Arrays mit den zugehörigen Alterswerten verwendet,
um das Donut-Div mit Chart neu zu rendern durch den Aufruch der Display-Donut-Funktion*/
function changeDonutValue(n) {
    if(n == 1) {
        donutChartSlider.value = parseInt(donutChartSlider.value) + 1
    }else if(n == -1) {
        donutChartSlider.value = parseInt(donutChartSlider.value) - 1
    }

    let j = viz3SelectAgesArray.indexOf(parseInt(donutChartSlider.value))
    let helpArray = new Array(2)
    helpArray[0] = viz3SelectAgesArray2[j]
    helpArray[1] = iterations - viz3SelectAgesArray2[j]

    let inputDiv = document.getElementById("donutInputDiv")

    /*Da beim Laden das Div auf display: none gesetzt ist, muss diese Abfrage erfolgen*/
    if(inputDiv != null) {
        let width = widthHelper
        let height = heightHelper
        inputDiv.innerHTML = ""

        let numbersAgesArr = [Math.round(viz3SelectAgesArray2[j]/iterations*100)]

        displayDonut([viz3SelectAgesArray[j]], numbersAgesArr, 
            inputDiv, 0, width, height, helpArray, -1)
    }
    
}

//Erstellt genau ein Div mit dementsprechendem Donut und Text anhand der übergebenen Parameter
function displayDonut(agesArr, numbersAgesArr, mainDiv, j, width2, height2, helpArray, index) {

    /*Erstellen des Divs für den Titel und die Grafiken. Je nach
        Länge des übergebenen Arrays und in Abhängigkeit der Displaygröße
        wird für jedes Alter ein solches Div erstellt. Anschließend wird
        der Titel für das Alter und das SVG-Element angehängt*/

        let header = document.createElement("div")
        header.className = "fontViz"
        if(agesArr.length > 5) {
            header.innerHTML = Math.round(agesArr[j]) + "<br>" + "Jahre"
        }else{
            header.innerText = Math.round(agesArr[j]) + " Jahre"
        }
        
        header.style.width = "100%"
        mainDiv.appendChild(header)

        let viz = document.createElement("div")
        viz.className = "centerContent"
        viz.style.width = 1/agesArr.length*width2 + "px"
        viz.style.height = height2 + "px"
        mainDiv.appendChild(viz)

        /*Erstellung des SVG-Pie Charts*/
        // set the dimensions and margins of the graph
        var width =  Math.min(1/agesArr.length*width2, height2)
        var height = width
        let margin = 0.05*Math.min(width, height)

        let innerBevel = "innerbevel" + index

        // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
        var radius = Math.min(width, height)/ 2 - margin
        // Compute the position of each group on the pie:
        var pie = d3.pie()
        .value(function(d) {return d.value; })
        .sort(null);
        var data_ready = pie(d3.entries(helpArray))

        var svg = d3.select(viz)
        
        svg.append("svg")
        .attr("width", width)
        .attr("height", height)
        //.attr("viewBox", 0 + " " + 0 + " " + width + " " + height)
        
        svg = svg.select("svg")
        
        svg.append("defs")
        
        var defs = svg.select("defs")
            defs.append("mask")
                .attr("id", innerBevel)
            mask = defs.select("#" + innerBevel)
            mask.append("rect")
                .attr("width", "200%")
                .attr("height", "200%")
                .attr("fill", "black")
            mask.append("circle")
                .attr("cx", "0")
                .attr("cy", "0")
                .attr("r", 0.8*radius)
                .attr("fill", "white")

        svg.append("g")
            .attr("transform", "translate(" + (radius+margin) + "," + (radius+margin) + ")")

        var mainG = svg.select("g")
            //first G
            mainG.append("g")
                .attr("id", "firstG")
            var g = mainG.select("#firstG")
            
            g
            .selectAll('whatever')
            .data(data_ready)
            .enter()
            .append('path')
            
            .attr('d', d3.arc()
            .innerRadius(0.8*radius)
            .outerRadius(radius)
            )
            .attr('fill', function(d){ 
                if(d.data.key == 0) {
                    return '#1a9850'
                }else{
                    return '#d73027'
                }
            })

            if (!(Math.round(numbersAgesArr[j]) > 91)) {
                g
                .selectAll('whatever')
                .data(data_ready)
                .enter()
                .append('circle')
                .attr("cx", function(d) {
                    var help = d3.arc()
                                .innerRadius(0.6*radius)
                                .outerRadius(0.8*radius)
                    var helpStr = help(d).split(",")
                    return helpStr[6]
                })
                .attr("cy", function(d) {
                    var help = d3.arc()
                                .innerRadius(0.6*radius)
                                .outerRadius(0.8*radius)
                    var helpStr = help(d).split(",")
                    if(Math.round(helpArray[d.index]) == 0 || helpArray[d.index] == iterations) {
                        return "" + (-0.8*radius)
                    }else{
                        return helpStr[7].substr(0,helpStr[7].indexOf("L"))
                    }
                    
                })
                .attr("r", 0.2*radius)
                .attr('fill', function(d){ 
                    if(d.data.key == 0) {
                        return '#1a9850'
                    }else{
                        return '#d73027'
                    }
                })

            }

            //2nd G

            mainG.append("g")
                .attr("id", "scndG")
                .attr("mask", "url(#" + innerBevel + ")")
            g = mainG.select("#scndG")
            
            g
            .selectAll('whatever')
            .data(data_ready)
            .enter()
            .append('path')
            .attr('d', d3.arc()
            .innerRadius(0.6*radius)
            .outerRadius(radius)
            )

            .attr('fill', function(d){ 
                if(d.data.key == 0) {
                    return '#0B4022'
                }else{
                    return '#400E0B'
                }
            })

            if (!(Math.round(numbersAgesArr[j]) > 91)) {
                g
                .selectAll('whatever')
                .data(data_ready)
                .enter()
                .append('circle')
                .attr("cx", function(d) {
                    var help = d3.arc()
                                .innerRadius(0.6*radius)
                                .outerRadius(0.8*radius)
                    var helpStr = help(d).split(",")
                    return helpStr[6]
                })
                .attr("cy", function(d) {
                    var help = d3.arc()
                                .innerRadius(0.6*radius)
                                .outerRadius(0.8*radius)
                    var helpStr = help(d).split(",")
                    if(Math.round(helpArray[d.index]) == 0 || helpArray[d.index] == iterations) {
                        return "" + (-0.8*radius)
                    }else{
                        return helpStr[7].substr(0,helpStr[7].indexOf("L"))
                    }
                })
                .attr("r", 0.2*radius)
                .attr('fill', function(d){ 
                    if(d.data.key == 0) {
                        return '#0B4022'
                    }else{
                        return '#400E0B'
                    }
                })
            }
            
        mainG.append("text")
        .attr("text-anchor", "middle")
        .attr("dominant-baseline", "middle")
        .text(Math.round(numbersAgesArr[j]) + "%")
        .attr("class", "fontHeader")
        .style("font-size", function() {
            if(agesArr.length > 6) {
                return "1rem"
            }else if(agesArr.length > 4){
                return "1.2rem"
            }else if(index == -1 && 0.4*radius < sizeHistogramHelper/6*1.7) {
                return "1rem"
            }else{
                return "1.7rem"
            }
        })
        .style("padding-top", "1rem")
}
    

//Histogram-Darstellung

function vizHistogram(arr, deviation, pensionStart, pensionEnd, tolerance) {

    var paras = document.getElementsByClassName('tooltips');

    while(paras[0] || paras[0] !=undefined) {
        paras[0].parentNode.removeChild(paras[0])
    }

    var viz2 = d3.select("#viz2")
    .html("")

    viz2.append("div")
    .attr("id", "viz2Header")
    .attr("class", "centerContent alignCenter")
    .append("h2")
    .text("Wie lange reicht das Geld?")


    viz2.append("div")
    .attr("id", "viz2Display")
    .attr("class", "centerContent alignCenter")
    .append("div")
    .attr("id", "viz2Histogram")
    .attr("class", "centerContent alignCenter")

    let container = document.getElementById("vizSlide")
    let changeVizIcons = container.lastElementChild
    let width2 = container.clientWidth - 2*changeVizIcons.clientWidth;

    let height2 = container.clientHeight - sizeHistogramHelper
    let helpStr = "0 0 " + width2 + " " + height2

    
    let helpMargin
    helpMargin = 0.8*sizeHistogramHelper

    let margin = {top: 0, right: 0, bottom: helpMargin, left: 1.2*helpMargin}
    width = width2 - margin.left - margin.right,
    height = height2 - margin.top - margin.bottom;

    var max = d3.max(arr)
    var min = d3.min(arr)

    var svg = d3.select("#viz2Histogram")
    .html("")
    .append("svg")
    .attr("viewBox", helpStr)
    .attr("width", width2)
    .attr("height", height2)
    .append("g")
    .attr('transform', 'translate('+ margin.left +', '+ margin.top +')');
    
    var x = d3.scaleLinear()
        .domain([min-1,max+1])
        .range([0, width]);

    const xAxisTicks = x.ticks()
    .filter(tick => Number.isInteger(tick));
    
    var histogram = d3.histogram()
    .domain(x.domain())  
    .thresholds(xAxisTicks);

    var bins = histogram(arr)

    var ymax = d3.max(bins, (d) => Math.max((d.length))/arr.length*100+5,100)

    var y = d3.scaleLinear()
    .range([height, 0]);
    y.domain([0, ymax]);   // d3.hist has to be called before the Y axis obviously
    svg.append("g")
    .style("font-size", "1.2rem")
    .style("font-family","'Montserrat', serif")
    .call(d3.axisLeft(y)
            .tickFormat(function(d) { return d + "%"; }));

    /*Code zur Farbzuordnung: Problem ist immer wieder, dass zu viel
    rot am Anfang bzw. zu viel grün am Ende zu einem Ungleichgewicht sorgen.
    
    Deswegen soll die Mitte und das 90% Quantil bestimmt werden um diese als Farbgrenzen zu
    definieren*/

    let middle
    let end
    let sum = 0
    let j = 0
    let bool = true
    
    
    for(let i = 0; i < bins.length; i++) {
        sum += bins[i].length
        if(bins[j].x1 >= pensionEnd) {
            if(bins[j+2] != undefined) {
                middle = bins[j+2].x0
            }else{
                middle = bins[j].x0
            }
            
        }else{
            j++
        }
        
        if(sum > 0.90*arr.length && bool == true) {
            end = bins[i].x0
            bool = false
        }
    }

    if(end <= pensionEnd) {
        end = bins[bins.length-1].x0
    }

    if(middle == undefined) {
        middle = end
    }

    let colorScale = d3.scalePow()
        .exponent(0.001)
        .domain([bins[0].x0, middle, end])
        .range(['#d73027','#87A34A', '#1a9850'])
        .interpolate(d3.interpolateHcl)

    var tooltip = d3.select("body").append("div").attr("class", "tooltip").style("left", "-1000px");
    
    svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .style("font-size", "1.2rem")
        .style("font-family","'Montserrat', serif")
        .call(d3.axisBottom(x)
        .tickValues(xAxisTicks)
        .tickFormat(d3.format('d'))
        );

    svg.append('g')
    .attr('class', 'grid')
    .call(d3.axisLeft()
        .scale(y)
        .tickSize(-width, 0)
        .tickFormat(''))

    svg.selectAll("rect")
    .data(bins)
    .enter()
    .append("rect")
    .attr("x", 1)
    .attr("transform", function(d) {
        if (bins[1].x1-bins[1].x0 < 2) {
            return "translate(" + x(d.x0-0.5) + "," + y(d.length/arr.length*100) + ")"  
        }else{
            return "translate(" + x(d.x0) + "," + y(d.length/arr.length*100) + ")"  
        }
            
    })
    .attr("width", function(d) {
        return Math.max(x(d.x1) - x(d.x0) -1, 0);   
    })
    .attr("height", function(d) { 
            return height - y(d.length/arr.length*100) 
        })
        
    .attr("fill", function(d) {
            if(d.x0 <= end && d.x0 >= pensionStart) {
                return colorScale(d.x0);
            }else if(d.x0 > end){
                return '#1a9850';
            }else{
                return '#d73027';
            }
            
    })

    .on("mouseover", function(){
          d3.select(this).transition()
             .duration('50')
             .attr('opacity', '.85');     

             tooltip.transition()
             .duration('200')
             .style("opacity", '1')
             
    })

    .on("mousemove", function(d){
        tooltip
        .style("left", d3.event.pageX - 50 + "px")
        .style("top", d3.event.pageY - 70 + "px")
        .html(("Alter: " + d.x0 + "-" + d.x1) + "<br>" + "Wahrscheinlichkeit: "+ Math.round(d.length/arr.length*100) + "%");
    })
    .on("mouseout", function(){
        d3.select(this).transition()
             .duration('50')
             .attr('opacity', '1');

        tooltip.transition()
        .duration('200')
        .style("opacity", '0')
    });

    svg.append("svg:line")
    .attr("x1", x(pensionEnd))
    .attr("y1", height)
    .attr("x2", x(pensionEnd))
    .attr("y2", 0)
    .attr("class", "reference-line")

    svg.append('text')
    .attr('x', -(height / 2)-margin.top)
    .attr('y', -margin.left/1.4)
    .attr('transform', 'rotate(-90)')
    .attr('text-anchor', 'middle')
    .text(function(){
        if(smartphone[4].matches) {
            return 'Prob. in %'
        }else{
            return "Wahrscheinlichkeit in %"
        }
    })

    svg.append('text')
        .attr('x', width / 2 - margin.left/2)
        .attr('y', height + helpMargin)
        .attr('text-anchor', 'middle')
        .text('Alter in Jahren')
        
}
\end{lstlisting}

\subsection*{main.js}

\begin{lstlisting}[style=js]
window.addEventListener("orientationchange", function() {
  updateValue()
})
window.addEventListener("resize", resizeChart)

/*Wenn die Seite mit einem Smartphone oder Tablet geöffnet wird soll
unmittelbar das erste Popup angezeigt werden*/
window.addEventListener("DOMContentLoaded", function() {
  fillRente(getEinmalbetrag(), getPerformance(), calcLaufzeit(), true)
  updateValue()
  if(smartphone[0].matches || smartphone[1].matches || smartphone[2].matches) {
    openSliderPopup(0)
  }
  funcSmartphone()

  /*Funktion zum Handeln des PWA-Supports*/
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./serviceworker.js');
  }
})


/*Listener für die Unterscheidung zwischen UpdateValue und UpdateDisplay*/
for (binding of bindings) {
  const input = binding.input
  const output = binding.output
  input.addEventListener('change', updateValue)
  input.addEventListener('input', updateDisplay.bind(binding))
  updateDisplay.apply(binding, [true])
}

/*Funktion, die auslöst, dass sich die Visualisierungen anpassen
Diese wird erst ausgelöst, wenn der Nutzer die Maus loslässt oder
den Finger vom Gerät nimmt*/
function updateValue() {
  calculateViz(getPerformance(),getDeviation(), getEinmalbetrag(),
  getStartAge(),getEndAge())
}

/*Dagegen werden die angezeigten Werte bereits während des
Änderungsvorgangs verändert, damit der Nutzer eine schnelle Rückmeldung erhält*/
function updateDisplay(shouldPreventUpdateValue) {
  const input = this.input
  const output = this.output
  let renteAlterStart = parseInt(renteneintrittsalter.input.value)
  let renteAlterEnde = parseInt(rentenaustrittsalter.input.value)

  let step

  if(isNaN(parseInt(input.step))) {
    step = 1
  }else{
    step = parseInt(input.step)
  }

  if(input.id == "rangeRenditeerwartung") {
    output.innerText = input.value + "%"

    if(checkMuSigma.checked == false) {
      standardabweichung.input.disabled = true;
      let sigma = sigmaFromPerformance(parseInt(input.value))
      //from https://stackoverflow.com/questions/8584902/get-closest-number-out-of-array
      let closest = closestNumberInArrayIndex(sigma, sigmaArray)
      standardabweichung.input.value = closest
      standardabweichung.output.innerText = textDeviation(parseInt(closest))
    }
  }else if(input.id == "rangeEinmalbetrag") {
    if(parseInt(input.value) <= parseInt(renteRange.input.value)*12) {
      window.alert("Die monatliche Entnahme darf nicht höher sein, als das Startkapital durch 12 Monate dividiert!")
      input.value = Math.ceil(parseInt(renteRange.input.value)*12/5000)*5000
    }
    output.innerText = numberWithPoints(input.value) + "?"
  }else if(input.id == "rangeStandardabweichung" && checkMuSigma.checked == true) {
    output.innerText = textDeviation(parseInt(input.value))

    /*Verhindern, dass Renteintrittsalter und -austrittsalter sich fälschlicher-
    weise überschneiden*/
  }else if(input.id == "rangeRenteneintrittsalter") {
      if(parseInt(input.value) >= renteAlterEnde) {
        window.alert("Das Rentenaustrittsalter muss mindestens ein Jahr über dem Renteneintrittsalter liegen!")
        input.value = renteAlterEnde - step
        renteAlterStart = renteAlterEnde - step
      }
      output.innerText = input.value
      renteAlterStart = parseInt(input.value)

      rentenaustrittsalter.input.min = parseInt(input.value) + step

    }else if(input.id == "rangeRentenaustrittsalter") {
      if(parseInt(input.value) <= renteAlterStart) {
          window.alert("Das Rentenaustrittsalter muss mindestens ein Jahr über dem Renteneintrittsalter liegen!")
          input.value = renteAlterStart + step
          output.innerText = input.value
      }
      output.innerText = input.value
      renteAlterEnde = parseInt(input.value)

      renteneintrittsalter.input.max = Math.min(parseInt(input.value) - 1,75)
      fillPercentageHeader(renteAlterEnde)


    }else if(input.id == "rangeRente") {
      if(parseInt(input.value)*12 > parseInt(einmalbetrag.input.value)) {
        window.alert("Die monatliche Entnahme darf nicht höher sein, als das Startkapital durch 12 Monate dividiert!")
        input.value = einmalbetrag.input.value - step
      }
      output.innerText = numberWithPoints(input.value) + "?"
    }else{
      output.innerText = input.value
    }

    /*Ersetzen des Textes in den Boxen*/

  if (input.id != "rangeRente") {
    fillRente(getEinmalbetrag(),getPerformance(),renteAlterEnde-renteAlterStart, false)
  }
}

\end{lstlisting}

\section{PWA-Support}

\subsection*{serviceworker.js}

\begin{lstlisting}[style=js]
const cacheName = 'rentenrechner-pwa';
const filesToCache = [
  '/',
  '/index.html',
  '/css/style.css',
  '/css/root.css',
  '/css/rangeSlider.css',
  '/css/onOffSwitch.css',
  '/css/mediaQueries.css',
  '/css/css/all.css',
  '/css/css/all.min.css',
  '/css/css/brands.css',
  '/css/css/brands.min.css',
  '/css/css/fontawesome.css',
  '/css/css/fontawesome.min.css',
  '/css/css/regular.css',
  '/css/css/regular.min.css',
  '/css/css/solid.css',
  '/css/css/solid.min.css',
  '/css/css/svg-with-js.css',
  '/css/css/svg-with-js.min.css',
  '/css/css/v4-shims.css',
  '/css/css/v4-shims.min.css',
  '/css/fonts/changa-v9-latin-regular.eot',
  '/css/fonts/changa-v9-latin-regular.svg',
  '/css/fonts/changa-v9-latin-regular.ttf',
  '/css/fonts/changa-v9-latin-regular.woff',
  '/css/fonts/changa-v9-latin-regular.woff2',
  '/css/fonts/montserrat-v14-latin-regular.eot',
  '/css/fonts/montserrat-v14-latin-regular.svg',
  '/css/fonts/montserrat-v14-latin-regular.ttf',
  '/css/fonts/montserrat-v14-latin-regular.woff',
  '/css/fonts/montserrat-v14-latin-regular.woff2',
  '/css/webfonts/fa-brands-400.eot',
  '/css/webfonts/fa-brands-400.svg',
  '/css/webfonts/fa-brands-400.ttf',
  '/css/webfonts/fa-brands-400.woff',
  '/css/webfonts/fa-brands-400.woff2',
  '/css/webfonts/fa-regular-400.eot',
  '/css/webfonts/fa-regular-400.svg',
  '/css/webfonts/fa-regular-400.ttf',
  '/css/webfonts/fa-regular-400.woff',
  '/css/webfonts/fa-regular-400.woff2',
  '/css/webfonts/fa-solid-900.eot',
  '/css/webfonts/fa-solid-900.svg',
  '/css/webfonts/fa-solid-900.ttf',
  '/css/webfonts/fa-solid-900.woff',
  '/css/webfonts/fa-solid-900.woff2',
  '/Uni_Ulm_Logo_Ausschnitt.svg',
  '/Uni_ulm_logo.svg',
  '/svg/bad.svg',
  '/svg/check.svg',
  '/svg/confused.svg',
  '/svg/good.svg',
  '/svg/happy.svg',
  '/svg/histogram.svg',
  '/svg/lebenserwartung.svg',
  '/svg/medium.svg',
  '/svg/normal.svg',
  '/svg/rente.svg',
  '/svg/stop.svg',
  '/css/Hintergrund.jpg',
  '/js/blackScholesModel.js',
  '/js/d3v5Min.js',
  '/js/fontAwesome.js',
  '/js/hilfsprozeduren.js',
  '/js/main.js',
  '/js/mediaQueries.js',
  '/js/openPopup.js',
  '/js/pageSlider.js',
  '/js/renteBerechnen.js',
  '/js/seedRandom.js',
  '/js/swiped-events.min.js',
  '/js/variables.js',
  '/js/vizFunctions.js',
];

/* Start the service worker and cache all of the app's content */
self.addEventListener('install', function(e) {
  e.waitUntil(
    caches.open(cacheName).then(function(cache) {
      return cache.addAll(filesToCache);
    })
  );
});

/* Serve cached content when offline */
self.addEventListener('fetch', function(e) {
  e.respondWith(
    caches.match(e.request).then(function(response) {
      return response || fetch(e.request);
    })
  );
});

\end{lstlisting}

\subsection*{manifest.json}

\begin{lstlisting}[style=json]
{
  "name": "Entnahmerechner",
  "short_name": "Entnahmerechner",
  "lang": "de-DE",
  "start_url": "/index.html",
  "display": "standalone",
  "background_color": "white",
  "theme_color": "white",
  "icons": [
    {
      "src": "images/icons/icon-72x72.png",
      "sizes": "72x72",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-96x96.png",
      "sizes": "96x96",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-128x128.png",
      "sizes": "128x128",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-144x144.png",
      "sizes": "144x144",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-152x152.png",
      "sizes": "152x152",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-384x384.png",
      "sizes": "384x384",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ],
  "splash_pages": null
}
\end{lstlisting}

